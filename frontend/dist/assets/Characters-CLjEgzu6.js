import{d as ee,u as te,o as se,j as _,s as y,i as q,w as M,r as b,h as a,b as e,c as l,l as u,t as n,e as v,F as j,k as R,n as h,m as O,T as Q,q as z,v as B,x as $,y as G,p as A}from"./index-DyXu58aN.js";import{u as oe}from"./useFormatters-SlNtu6dn.js";import{_ as ae}from"./MainLayout.vue_vue_type_style_index_0_lang-KV4uLK8U.js";const le={class:"flex items-center justify-between mb-8"},ne=["disabled"],re={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},de={key:0,class:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 flex items-center justify-between backdrop-blur-sm"},ue={key:1,class:"flex flex-col items-center justify-center py-24"},ce={class:"mb-10"},ve={key:0,class:"relative group"},me={class:"relative bg-gradient-to-br from-slate-900 via-slate-900 to-amber-950/20 rounded-2xl border border-amber-500/40 p-6 overflow-hidden"},pe={class:"flex items-start gap-6"},be={class:"relative flex-shrink-0"},he={class:"relative"},xe=["src","alt"],ge={class:"flex-1 min-w-0"},fe={class:"text-xl font-bold text-slate-100 tracking-wide"},ke={class:"text-slate-400 mt-0.5"},ye={key:0,class:"text-sm text-amber-400/80 mt-0.5"},we={class:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-slate-700/50"},_e={class:"text-lg font-semibold text-cyan-400 font-mono"},Me={class:"text-sm text-slate-200"},Ce={class:"text-amber-400"},Se={class:"text-xs text-slate-400"},je={key:0,class:"text-slate-500"},ze={key:1,class:"text-sm text-slate-500 italic"},Be={class:"flex-shrink-0"},$e=["disabled"],Ae={key:1,class:"bg-slate-900/50 rounded-2xl border border-dashed border-slate-700 p-12 text-center"},Ie={key:0,class:"mb-10"},Te={class:"text-xs font-semibold text-cyan-400 uppercase tracking-widest mb-4 flex items-center gap-2"},Ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},He={class:"relative flex items-start gap-4"},Le=["src","alt"],Ee={class:"flex-1 min-w-0"},Ne={class:"font-semibold text-slate-100 truncate group-hover:text-cyan-300 transition-colors"},Fe={class:"text-sm text-slate-400 truncate"},qe={class:"flex items-center gap-2 mt-2"},Re={class:"mt-3 pt-3 border-t border-slate-700/50"},De={class:"text-sm font-semibold text-cyan-400 font-mono group-hover:text-cyan-300 transition-colors"},Ke={key:0,class:"mt-2"},Pe={class:"text-sm text-slate-300"},Ue={class:"text-amber-400"},We={class:"text-xs text-slate-500"},Je={key:0},Oe={key:1,class:"mt-2"},Qe={class:"relative flex items-center justify-end gap-1 mt-4 pt-3 border-t border-slate-700/30"},Ge=["onClick","disabled","title"],Ye=["onClick","disabled"],Xe=["onClick","disabled"],Ze={key:1,class:"mb-10"},et={class:"text-xs font-semibold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2"},tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},st={class:"relative flex items-start gap-4"},ot=["src","alt"],at={class:"flex-1 min-w-0"},lt={class:"font-semibold text-slate-200 truncate group-hover:text-slate-100 transition-colors"},nt={class:"text-sm text-slate-500 truncate"},rt={key:0,class:"text-xs text-slate-600 truncate"},it={class:"flex items-center gap-2 mt-2"},dt={class:"mt-3 pt-3 border-t border-slate-700/30"},ut={class:"text-sm font-semibold text-cyan-400/80 font-mono group-hover:text-cyan-400 transition-colors"},ct={key:1,class:"mt-2"},vt={class:"text-sm text-slate-300"},mt={class:"text-amber-400"},pt={class:"text-xs text-slate-500"},bt={key:0},ht={key:2,class:"mt-2"},xt={class:"relative flex items-center justify-end gap-1 mt-4 pt-3 border-t border-slate-700/30"},gt=["onClick","disabled","title"],ft=["onClick","disabled"],kt=["onClick","disabled"],yt={key:2,class:"text-center py-16 bg-slate-900/30 rounded-2xl border border-dashed border-slate-700"},wt=["disabled"],_t={key:0,class:"bg-slate-900 rounded-2xl border border-slate-700/50 max-w-sm w-full p-6 shadow-2xl"},Mt={class:"text-slate-400 text-sm mb-6"},Ct={class:"text-slate-200"},St={class:"flex gap-3"},jt=["disabled"],zt=["disabled"],Bt={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$t={key:0,class:"bg-slate-900 rounded-2xl border border-slate-700/50 max-w-sm w-full p-6 shadow-2xl"},At={class:"text-slate-400 text-sm mb-4"},It={class:"text-slate-200"},Tt={key:0,class:"text-amber-400 text-sm mb-6 p-3 bg-amber-500/10 rounded-xl border border-amber-500/20 flex items-start gap-2"},Vt={class:"flex gap-3"},Ht=["disabled"],Lt=["disabled"],Et={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Dt=ee({__name:"Characters",setup(Nt){const x=te(),{formatIsk:I}=oe(),g=b([]),C=b(new Map),c=b(new Map),T=b(!0),i=b(!1),m=b(""),f=b(!1),k=b(!1),p=b(null),r=A(()=>g.value.find(o=>o.isMain)),V=A(()=>g.value.filter(o=>!o.isMain)),H=A(()=>V.value.filter(o=>{var t;return o.corporationId===((t=r.value)==null?void 0:t.corporationId)})),L=A(()=>V.value.filter(o=>{var t;return o.corporationId!==((t=r.value)==null?void 0:t.corporationId)}));function E(o){const t=new Date(o),s=new Date,d=t.getTime()-s.getTime();if(d<=0)return"Done";const w=Math.floor(d/(1e3*60*60*24)),S=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),J=Math.floor(d%(1e3*60*60)/(1e3*60));return w>0?`${w}j ${S}h`:S>0?`${S}h ${J}m`:`${J}m`}function N(o){return o?{1:"I",2:"II",3:"III",4:"IV",5:"V"}[o]??`${o}`:""}se(async()=>{await Promise.all([Y(),X(),Z()])});async function Y(){T.value=!0,m.value="";try{const o=await _("/api/me/characters",{headers:{Authorization:`Bearer ${x.token}`}});if(!o.ok)throw new Error("Failed to fetch characters");const t=await y(o);g.value=Array.isArray(t)?t:t.member||t["hydra:member"]||[]}catch(o){m.value="Failed to load characters",console.error(o)}finally{T.value=!1}}async function X(){try{const o=await _("/api/me/wallets",{headers:{Authorization:`Bearer ${x.token}`}});if(!o.ok)return;const t=await y(o),s=new Map;for(const d of t.wallets||[])s.set(d.characterId,d.balance);C.value=s}catch(o){console.error("Failed to fetch wallets",o)}}async function Z(){try{const o=await _("/api/me/skillqueues",{headers:{Authorization:`Bearer ${x.token}`}});if(!o.ok)return;const t=await y(o),s=new Map;for(const d of t.skillQueues||[])s.set(d.characterId,d);c.value=s}catch(o){console.error("Failed to fetch skill queues",o)}}async function D(){i.value=!0,m.value="";try{const o=await fetch("/auth/eve/redirect",{headers:{Authorization:`Bearer ${x.token}`}}),t=await y(o);t.redirect_url?(sessionStorage.setItem("eve_oauth_state",t.state||""),sessionStorage.setItem("eve_oauth_action","add-character"),window.location.href=t.redirect_url):m.value="Failed to get redirect URL"}catch(o){m.value="Connection error",console.error(o)}finally{i.value=!1}}function K(o){p.value=o,f.value=!0}async function P(){if(p.value){i.value=!0,m.value="";try{const o=await _(`/api/me/characters/${p.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${x.token}`,"Content-Type":"application/json"},body:JSON.stringify({})});if(!o.ok){const t=await y(o);throw new Error(t.message||"Failed to delete character")}g.value=g.value.filter(t=>{var s;return t.id!==((s=p.value)==null?void 0:s.id)}),f.value=!1,p.value=null}catch(o){m.value=o.message||"Failed to delete character",console.error(o)}finally{i.value=!1}}}function U(o){p.value=o,k.value=!0}async function W(){if(p.value){i.value=!0,m.value="";try{const o=await _(`/api/me/characters/${p.value.id}/set-main`,{method:"POST",headers:{Authorization:`Bearer ${x.token}`,"Content-Type":"application/json"},body:JSON.stringify({})});if(!o.ok){const t=await y(o);throw new Error(t.message||"Failed to set main character")}g.value=g.value.map(t=>{var s;return{...t,isMain:t.id===((s=p.value)==null?void 0:s.id)}}),await x.fetchUser(),k.value=!1,p.value=null}catch(o){m.value=o.message||"Failed to set main character",console.error(o)}finally{i.value=!1}}}async function F(o){i.value=!0,m.value="";try{const t=await fetch("/auth/eve/redirect",{headers:{Authorization:`Bearer ${x.token}`}}),s=await y(t);s.redirect_url?(sessionStorage.setItem("eve_oauth_state",s.state||""),sessionStorage.setItem("eve_oauth_action","reauthorize"),sessionStorage.setItem("eve_oauth_character_id",o.id),window.location.href=s.redirect_url):m.value="Failed to get redirect URL"}catch(t){m.value="Connection error",console.error(t)}finally{i.value=!1}}return(o,t)=>(a(),q(ae,null,{default:M(()=>[e("div",le,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-100 tracking-wide"},"Personnages"),e("p",{class:"text-slate-400 mt-1"},"Gérez vos personnages EVE liés")],-1)),e("button",{onClick:D,disabled:i.value,class:"px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(a(),l("svg",re,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(a(),l("svg",ie,[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"},null,-1)])])),t[10]||(t[10]=u(" Ajouter un personnage ",-1))],8,ne)]),m.value?(a(),l("div",de,[e("span",null,n(m.value),1),e("button",{onClick:t[0]||(t[0]=s=>m.value=""),class:"text-red-400 hover:text-red-300 transition-colors"},[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):v("",!0),T.value?(a(),l("div",ue,[...t[13]||(t[13]=[e("div",{class:"relative"},[e("div",{class:"w-16 h-16 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin"}),e("div",{class:"absolute inset-0 w-16 h-16 border-4 border-transparent border-b-cyan-400/50 rounded-full animate-spin",style:{"animation-direction":"reverse","animation-duration":"1.5s"}})],-1),e("p",{class:"text-slate-400 mt-6 animate-pulse"},"Chargement des personnages...",-1)])])):(a(),l(j,{key:2},[e("section",ce,[t[20]||(t[20]=e("h2",{class:"text-xs font-semibold text-cyan-400 uppercase tracking-widest mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),u(" Personnage principal ")],-1)),r.value?(a(),l("div",ve,[t[18]||(t[18]=e("div",{class:"absolute -inset-0.5 bg-gradient-to-r from-amber-500/50 via-amber-400/30 to-amber-500/50 rounded-2xl blur opacity-40 group-hover:opacity-60 transition-opacity duration-500"},null,-1)),e("div",me,[t[17]||(t[17]=e("div",{class:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-amber-400 to-amber-500"},null,-1)),e("div",pe,[e("div",be,[e("div",he,[e("img",{src:`https://images.evetech.net/characters/${r.value.eveCharacterId}/portrait?size=256`,alt:r.value.name,class:"w-24 h-24 rounded-xl border-2 border-amber-500/50 shadow-lg shadow-amber-500/20"},null,8,xe),t[14]||(t[14]=e("div",{class:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-amber-400 to-amber-600 rounded-full flex items-center justify-center shadow-lg shadow-amber-500/40 animate-pulse",style:{"animation-duration":"2s"}},[e("svg",{class:"w-5 h-5 text-amber-900",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])],-1))])]),e("div",ge,[e("h3",fe,n(r.value.name),1),e("p",ke,n(r.value.corporationName),1),r.value.allianceName?(a(),l("p",ye,n(r.value.allianceName),1)):v("",!0),e("div",we,[e("div",null,[t[15]||(t[15]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wide"},"Wallet",-1)),e("p",_e,n(R(I)(C.value.get(r.value.id),1))+" ISK",1)]),e("div",null,[t[16]||(t[16]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wide"},"Entraînement",-1)),c.value.get(r.value.id)?(a(),l(j,{key:0},[e("p",Me,[u(n(c.value.get(r.value.id).skillName)+" ",1),e("span",Ce,n(N(c.value.get(r.value.id).finishedLevel)),1)]),e("p",Se,[u(n(E(c.value.get(r.value.id).finishDate))+" ",1),c.value.get(r.value.id).queueSize>1?(a(),l("span",je," ("+n(c.value.get(r.value.id).queueSize)+" en file) ",1)):v("",!0)])],64)):(a(),l("p",ze,"Aucun skill en cours"))])]),e("div",{class:h(["inline-flex items-center gap-2 mt-4 px-3 py-1.5 rounded-lg text-sm font-medium",r.value.hasValidToken?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":r.value.hasMissingScopes?"bg-amber-500/10 text-amber-400 border border-amber-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"])},[e("span",{class:h(["w-2 h-2 rounded-full",r.value.hasValidToken?"bg-emerald-400 animate-pulse":r.value.hasMissingScopes?"bg-amber-400":"bg-red-400"])},null,2),u(" "+n(r.value.hasValidToken?"Token valide":r.value.hasMissingScopes?"Scopes manquants":"Token expiré"),1)],2)]),e("div",Be,[!r.value.hasValidToken||r.value.hasMissingScopes?(a(),l("button",{key:0,onClick:t[1]||(t[1]=s=>F(r.value)),disabled:i.value,class:h(["px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 border",r.value.hasMissingScopes?"bg-amber-500/20 hover:bg-amber-500/30 text-amber-400 border-amber-500/30":"bg-red-500/20 hover:bg-red-500/30 text-red-400 border-red-500/30"])}," Ré-autoriser ",10,$e)):v("",!0)])])])])):(a(),l("div",Ae,[...t[19]||(t[19]=[e("svg",{class:"w-16 h-16 mx-auto text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),e("p",{class:"text-slate-500"},"Aucun personnage principal défini",-1)])]))]),H.value.length>0?(a(),l("section",Ie,[e("h2",Te,[t[21]||(t[21]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),u(" Même corporation ("+n(H.value.length)+") ",1)]),e("div",Ve,[(a(!0),l(j,null,O(H.value,s=>(a(),l("div",{key:s.id,class:"group relative bg-slate-900/80 rounded-xl border border-slate-700/50 hover:border-cyan-500/40 p-5 overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/10 hover:-translate-y-1"},[t[28]||(t[28]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-cyan-500/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out"},null,-1)),e("div",He,[e("img",{src:`https://images.evetech.net/characters/${s.eveCharacterId}/portrait?size=128`,alt:s.name,class:"w-16 h-16 rounded-lg border border-slate-700 group-hover:border-cyan-500/30 transition-colors"},null,8,Le),e("div",Ee,[e("h4",Ne,n(s.name),1),e("p",Fe,n(s.corporationName),1),e("div",qe,[e("span",{class:h(["inline-flex items-center gap-1.5 text-xs px-2 py-0.5 rounded-md",s.hasValidToken?"bg-emerald-500/10 text-emerald-400":s.hasMissingScopes?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"])},[e("span",{class:h(["w-1.5 h-1.5 rounded-full",s.hasValidToken?"bg-emerald-400":s.hasMissingScopes?"bg-amber-400":"bg-red-400"])},null,2),u(" "+n(s.hasValidToken?"Valide":s.hasMissingScopes?"Scopes manquants":"Expiré"),1)],2)]),e("div",Re,[t[22]||(t[22]=e("p",{class:"text-xs text-slate-500"},"Wallet",-1)),e("p",De,n(R(I)(C.value.get(s.id),1))+" ISK",1)]),c.value.get(s.id)?(a(),l("div",Ke,[t[23]||(t[23]=e("p",{class:"text-xs text-slate-500"},"Entraînement",-1)),e("p",Pe,[u(n(c.value.get(s.id).skillName)+" ",1),e("span",Ue,n(N(c.value.get(s.id).finishedLevel)),1)]),e("p",We,[u(n(E(c.value.get(s.id).finishDate))+" ",1),c.value.get(s.id).queueSize>1?(a(),l("span",Je," ("+n(c.value.get(s.id).queueSize)+" en file) ",1)):v("",!0)])])):(a(),l("div",Oe,[...t[24]||(t[24]=[e("p",{class:"text-xs text-slate-500"},"Entraînement",-1),e("p",{class:"text-xs text-red-400 italic"},"Aucun skill en cours",-1)])]))])]),e("div",Qe,[!s.hasValidToken||s.hasMissingScopes?(a(),l("button",{key:0,onClick:d=>F(s),disabled:i.value,class:h(["p-2 rounded-lg transition-colors disabled:opacity-50",s.hasMissingScopes?"hover:bg-amber-500/10 text-amber-400 hover:text-amber-300":"hover:bg-red-500/10 text-slate-400 hover:text-red-400"]),title:s.hasMissingScopes?"Update scopes":"Re-authorize"},[...t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,Ge)):v("",!0),e("button",{onClick:d=>U(s),disabled:i.value,class:"p-2 rounded-lg hover:bg-amber-500/10 text-slate-400 hover:text-amber-400 transition-colors disabled:opacity-50",title:"Set as Main"},[...t[26]||(t[26]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1)])],8,Ye),e("button",{onClick:d=>K(s),disabled:i.value,class:"p-2 rounded-lg hover:bg-red-500/10 text-slate-400 hover:text-red-400 transition-colors disabled:opacity-50",title:"Remove"},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Xe)])]))),128))])])):v("",!0),L.value.length>0?(a(),l("section",Ze,[e("h2",et,[t[29]||(t[29]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)),u(" Autres corporations ("+n(L.value.length)+") ",1)]),e("div",tt,[(a(!0),l(j,null,O(L.value,s=>(a(),l("div",{key:s.id,class:"group relative bg-slate-900/60 rounded-xl border border-slate-800/50 hover:border-slate-500/40 p-5 overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-slate-500/5 hover:-translate-y-1"},[t[36]||(t[36]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-400/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out"},null,-1)),e("div",st,[e("img",{src:`https://images.evetech.net/characters/${s.eveCharacterId}/portrait?size=128`,alt:s.name,class:"w-16 h-16 rounded-lg border border-slate-700 opacity-80 group-hover:opacity-100 transition-opacity"},null,8,ot),e("div",at,[e("h4",lt,n(s.name),1),e("p",nt,n(s.corporationName),1),s.allianceName?(a(),l("p",rt,n(s.allianceName),1)):v("",!0),e("div",it,[e("span",{class:h(["inline-flex items-center gap-1.5 text-xs px-2 py-0.5 rounded-md",s.hasValidToken?"bg-emerald-500/10 text-emerald-400":s.hasMissingScopes?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"])},[e("span",{class:h(["w-1.5 h-1.5 rounded-full",s.hasValidToken?"bg-emerald-400":s.hasMissingScopes?"bg-amber-400":"bg-red-400"])},null,2),u(" "+n(s.hasValidToken?"Valide":s.hasMissingScopes?"Scopes manquants":"Expiré"),1)],2)]),e("div",dt,[t[30]||(t[30]=e("p",{class:"text-xs text-slate-500"},"Wallet",-1)),e("p",ut,n(R(I)(C.value.get(s.id),1))+" ISK",1)]),c.value.get(s.id)?(a(),l("div",ct,[t[31]||(t[31]=e("p",{class:"text-xs text-slate-500"},"Entraînement",-1)),e("p",vt,[u(n(c.value.get(s.id).skillName)+" ",1),e("span",mt,n(N(c.value.get(s.id).finishedLevel)),1)]),e("p",pt,[u(n(E(c.value.get(s.id).finishDate))+" ",1),c.value.get(s.id).queueSize>1?(a(),l("span",bt," ("+n(c.value.get(s.id).queueSize)+" en file) ",1)):v("",!0)])])):(a(),l("div",ht,[...t[32]||(t[32]=[e("p",{class:"text-xs text-slate-500"},"Entraînement",-1),e("p",{class:"text-xs text-red-400 italic"},"Aucun skill en cours",-1)])]))])]),e("div",xt,[!s.hasValidToken||s.hasMissingScopes?(a(),l("button",{key:0,onClick:d=>F(s),disabled:i.value,class:h(["p-2 rounded-lg transition-colors disabled:opacity-50",s.hasMissingScopes?"hover:bg-amber-500/10 text-amber-400 hover:text-amber-300":"hover:bg-red-500/10 text-slate-400 hover:text-red-400"]),title:s.hasMissingScopes?"Update scopes":"Re-authorize"},[...t[33]||(t[33]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,gt)):v("",!0),e("button",{onClick:d=>U(s),disabled:i.value,class:"p-2 rounded-lg hover:bg-amber-500/10 text-slate-400 hover:text-amber-400 transition-colors disabled:opacity-50",title:"Set as Main"},[...t[34]||(t[34]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1)])],8,ft),e("button",{onClick:d=>K(s),disabled:i.value,class:"p-2 rounded-lg hover:bg-red-500/10 text-slate-400 hover:text-red-400 transition-colors disabled:opacity-50",title:"Remove"},[...t[35]||(t[35]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,kt)])]))),128))])])):v("",!0),V.value.length===0?(a(),l("div",yt,[t[38]||(t[38]=e("svg",{class:"w-16 h-16 mx-auto text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)),t[39]||(t[39]=e("p",{class:"text-slate-500 mb-4"},"Aucun alt lié",-1)),e("button",{onClick:D,disabled:i.value,class:"px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mx-auto"},[...t[37]||(t[37]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),u(" Ajouter un personnage ",-1)])],8,wt)])):v("",!0)],64)),(a(),q(Q,{to:"body"},[z(B,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[f.value?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:t[3]||(t[3]=G(s=>f.value=!1,["self"])),onKeydown:[$(P,["enter"]),t[4]||(t[4]=$(s=>f.value=!1,["escape"]))]},[z(B,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:M(()=>{var s;return[f.value?(a(),l("div",_t,[t[43]||(t[43]=e("div",{class:"flex items-center gap-4 mb-4"},[e("div",{class:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])]),e("div",null,[e("h3",{class:"text-lg font-semibold text-slate-100"},"Remove Character"),e("p",{class:"text-sm text-slate-400"},"This action cannot be undone")])],-1)),e("p",Mt,[t[40]||(t[40]=u(" Remove ",-1)),e("strong",Ct,n((s=p.value)==null?void 0:s.name),1),t[41]||(t[41]=u("? This will delete all cached data for this character. ",-1))]),e("div",St,[e("button",{onClick:t[2]||(t[2]=d=>f.value=!1),disabled:i.value,class:"flex-1 py-2.5 bg-slate-800 hover:bg-slate-700 rounded-xl text-slate-300 font-medium transition-colors disabled:opacity-50"}," Cancel ",8,jt),e("button",{onClick:P,disabled:i.value,class:"flex-1 py-2.5 bg-red-600 hover:bg-red-500 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},[i.value?(a(),l("svg",Bt,[...t[42]||(t[42]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):v("",!0),u(" "+n(i.value?"Removing...":"Remove"),1)],8,zt)])])):v("",!0)]}),_:1})],32)):v("",!0)]),_:1})])),(a(),q(Q,{to:"body"},[z(B,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:M(()=>[k.value?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:t[6]||(t[6]=G(s=>k.value=!1,["self"])),onKeydown:[$(W,["enter"]),t[7]||(t[7]=$(s=>k.value=!1,["escape"]))]},[z(B,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:M(()=>{var s,d,w;return[k.value?(a(),l("div",$t,[t[48]||(t[48]=e("div",{class:"flex items-center gap-4 mb-4"},[e("div",{class:"w-12 h-12 rounded-xl bg-amber-500/10 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])]),e("div",null,[e("h3",{class:"text-lg font-semibold text-slate-100"},"Set as Main"),e("p",{class:"text-sm text-slate-400"},"Change your main character")])],-1)),e("p",At,[t[44]||(t[44]=u(" Make ",-1)),e("strong",It,n((s=p.value)==null?void 0:s.name),1),t[45]||(t[45]=u(" your main character? ",-1))]),((d=p.value)==null?void 0:d.corporationId)!==((w=r.value)==null?void 0:w.corporationId)?(a(),l("div",Tt,[...t[46]||(t[46]=[e("svg",{class:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("span",null,"This character is in a different corporation. Your corp reference will change.",-1)])])):v("",!0),e("div",Vt,[e("button",{onClick:t[5]||(t[5]=S=>k.value=!1),disabled:i.value,class:"flex-1 py-2.5 bg-slate-800 hover:bg-slate-700 rounded-xl text-slate-300 font-medium transition-colors disabled:opacity-50"}," Cancel ",8,Ht),e("button",{onClick:W,disabled:i.value,class:"flex-1 py-2.5 bg-amber-600 hover:bg-amber-500 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},[i.value?(a(),l("svg",Et,[...t[47]||(t[47]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):v("",!0),u(" "+n(i.value?"Updating...":"Confirm"),1)],8,Lt)])])):v("",!0)]}),_:1})],32)):v("",!0)]),_:1})]))]),_:1}))}});export{Dt as default};
