import{d as R,u as U,o as N,H as q,c as l,b as e,a as J,F as V,m as $,t as r,l as K,i as W,T as G,e as v,n as b,P as Q,r as p,p as m,h as a,g as X}from"./index-eOzsbP3j.js";const Y={class:"min-h-screen bg-slate-950 text-slate-100 font-sans"},Z={class:"relative flex h-screen"},ee={class:"w-64 bg-slate-900/80 backdrop-blur-xl border-r border-cyan-500/20 flex flex-col"},te={class:"flex-1 p-4 space-y-1"},se=["onClick"],oe={class:"w-5 h-5 relative",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ae=["d"],le={class:"font-medium relative"},ne={key:0,class:"ml-auto w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse relative"},re={class:"p-4 border-t border-cyan-500/20"},ie={class:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50"},de={class:"relative"},ce=["src","alt"],ue={key:1,class:"w-12 h-12 rounded-lg ring-2 ring-cyan-500/50 bg-slate-700 animate-pulse"},ve={class:"flex-1 min-w-0"},pe={class:"font-semibold text-slate-100 truncate"},he={class:"text-xs text-cyan-400 truncate"},ge=["disabled"],be={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me={key:1,class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xe={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},fe={class:"relative bg-slate-900 rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/10 w-full max-w-md mx-4"},ye={class:"flex items-center justify-between px-6 py-4 border-b border-slate-700/50"},_e={class:"p-6"},ke={class:"space-y-2"},we=["checked","onChange"],Me={class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ce=["d"],Se={class:"text-slate-200"},Ie={class:"px-6 py-4 border-t border-slate-700/50 flex justify-end"},je={class:"flex-1 overflow-auto"},ze={class:"sticky top-0 z-10 bg-slate-900/60 backdrop-blur-xl border-b border-cyan-500/10 px-8 py-4"},Le={class:"flex items-center justify-between"},Be={class:"text-2xl font-bold text-slate-100"},Ee={class:"flex items-center gap-4"},Ne=["title"],Ve={key:0,class:"text-slate-500"},$e={key:0,class:"flex items-center gap-2 px-4 py-2 bg-amber-500/10 rounded-lg border border-amber-500/30"},Oe=["src"],He={class:"text-amber-400 text-sm font-medium"},De={key:1,class:"flex items-center gap-2 px-4 py-2 bg-cyan-500/10 rounded-lg border border-cyan-500/30"},Te=["src"],Pe={class:"text-cyan-400 text-sm font-medium"},Ae={class:"p-8"},Fe={class:"max-w-7xl mx-auto"},Re="0.1.0",Je=R({__name:"MainLayout",setup(Ue){const x=X(),f=U(),h=p(null),i=p(!1);let y=null;async function w(){try{const s=await fetch("https://esi.evetech.net/status.json?datasource=tranquility");s.ok?(h.value=await s.json(),i.value=!1):i.value=!0}catch{i.value=!0}}N(()=>{w(),y=setInterval(w,6e4)}),q(()=>{y&&clearInterval(y)});const M=m(()=>f.user),n=m(()=>{var s,t,u;return((s=M.value)==null?void 0:s.mainCharacter)||((u=(t=M.value)==null?void 0:t.characters)==null?void 0:u[0])}),C=["assets","contracts"],_=[{id:"dashboard",label:"Tableau de bord",route:"/dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{id:"characters",label:"Personnages",route:"/characters",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},{id:"pve",label:"PVE",route:"/pve",icon:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},{id:"industry",label:"Industrie",route:"/industry",icon:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"},{id:"shopping-list",label:"Liste de courses",route:"/shopping-list",icon:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},{id:"assets",label:"Inventaire",route:"/assets",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"contracts",label:"Contrats",route:"/contracts",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}],c=p(!1),d=p([]);N(()=>{const s=localStorage.getItem("evetools_hidden_modules");if(s)try{d.value=JSON.parse(s)}catch{d.value=[...C]}else d.value=[...C]});function O(){localStorage.setItem("evetools_hidden_modules",JSON.stringify(d.value))}function H(s){const t=d.value.indexOf(s);t===-1?d.value.push(s):d.value.splice(t,1),O()}function S(s){return!d.value.includes(s)}const D=m(()=>_.filter(s=>S(s.id)));function T(s){x.push(s.route)}function k(s){return x.currentRoute.value.path===s.route}const g=p(!1),P=async()=>{g.value=!0;try{await fetch("/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${f.token}`}})}catch(s){console.error("Logout error:",s)}finally{f.logout(),x.push("/login")}},A=m(()=>{const s=_.find(t=>k(t));return(s==null?void 0:s.label)||"Dashboard"});return(s,t)=>{var u,I,j,z,L,B,E;return a(),l("div",Y,[t[15]||(t[15]=e("div",{class:"fixed inset-0 overflow-hidden pointer-events-none"},[e("div",{class:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-radial from-cyan-900/20 via-transparent to-transparent animate-pulse-slow"}),e("div",{class:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-radial from-indigo-900/15 via-transparent to-transparent animate-pulse-slower"}),e("div",{class:"absolute inset-0 bg-[linear-gradient(rgba(6,182,212,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(6,182,212,0.03)_1px,transparent_1px)] bg-[size:50px_50px]"})],-1)),e("div",Z,[e("aside",ee,[t[9]||(t[9]=J('<div class="p-6 border-b border-cyan-500/20"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/30"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><h1 class="text-lg font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400">EVE Tools</h1><p class="text-xs text-slate-500 tracking-widest uppercase">Utilities</p></div></div></div>',1)),e("nav",te,[(a(!0),l(V,null,$(D.value,o=>(a(),l("button",{key:o.id,onClick:F=>T(o),class:b(["w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-300 group relative overflow-hidden border",k(o)?"bg-gradient-to-r from-cyan-500/20 to-blue-500/10 text-cyan-400 shadow-lg shadow-cyan-500/10 border-cyan-500/30":"text-slate-400 border-transparent hover:bg-slate-800/50 hover:text-slate-200 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/5 hover:-translate-y-0.5"])},[t[4]||(t[4]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-cyan-500/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out"},null,-1)),(a(),l("svg",oe,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:o.icon},null,8,ae)])),e("span",le,r(o.label),1),k(o)?(a(),l("div",ne)):v("",!0)],10,se))),128))]),e("div",re,[e("div",ie,[e("div",{onClick:t[0]||(t[0]=o=>c.value=!0),class:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",title:"Ouvrir les parametres"},[e("div",de,[n.value?(a(),l("img",{key:0,src:`https://images.evetech.net/characters/${n.value.eveCharacterId}/portrait?size=64`,alt:n.value.name,class:"w-12 h-12 rounded-lg ring-2 ring-cyan-500/50"},null,8,ce)):(a(),l("div",ue)),t[5]||(t[5]=e("div",{class:"absolute -bottom-1 -right-1 w-4 h-4 bg-emerald-500 rounded-full border-2 border-slate-800"},null,-1))]),e("div",ve,[e("p",pe,r(((u=n.value)==null?void 0:u.name)||"Chargement..."),1),e("p",he,r(((I=n.value)==null?void 0:I.corporationName)||""),1)]),t[6]||(t[6]=e("svg",{class:"w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1))]),e("button",{onClick:P,disabled:g.value,class:"mt-4 w-full py-2 px-3 bg-slate-700/50 hover:bg-red-500/20 rounded-lg text-sm text-slate-400 hover:text-red-400 transition-colors flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed"},[g.value?(a(),l("svg",be,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(a(),l("svg",me,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"},null,-1)])])),K(" "+r(g.value?"Déconnexion...":"Déconnexion"),1)],8,ge)])]),e("p",{class:"mt-3 pb-4 text-center text-xs text-slate-600"},"v"+r(Re))]),(a(),W(G,{to:"body"},[c.value?(a(),l("div",xe,[e("div",{class:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm",onClick:t[1]||(t[1]=o=>c.value=!1)}),e("div",fe,[e("div",ye,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-slate-100"},"Parametres",-1)),e("button",{onClick:t[2]||(t[2]=o=>c.value=!1),class:"p-1 hover:bg-slate-800 rounded-lg transition-colors"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",_e,[t[12]||(t[12]=e("h4",{class:"text-sm font-medium text-slate-400 uppercase tracking-wider mb-4"},"Modules visibles",-1)),e("div",ke,[(a(),l(V,null,$(_,o=>e("label",{key:o.id,class:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-800/50 cursor-pointer transition-colors"},[e("input",{type:"checkbox",checked:S(o.id),onChange:F=>H(o.id),class:"w-4 h-4 rounded border-slate-600 bg-slate-800 text-cyan-500 focus:ring-cyan-500 focus:ring-offset-slate-900"},null,40,we),(a(),l("svg",Me,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:o.icon},null,8,Ce)])),e("span",Se,r(o.label),1)])),64))]),t[13]||(t[13]=e("p",{class:"mt-4 text-xs text-slate-500"}," Les modules masques n'apparaitront plus dans le menu de navigation. ",-1))]),e("div",Ie,[e("button",{onClick:t[3]||(t[3]=o=>c.value=!1),class:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white text-sm font-medium transition-colors"}," Fermer ")])])])):v("",!0)])),e("main",je,[e("header",ze,[e("div",Le,[e("div",null,[e("h2",Be,r(A.value),1),t[14]||(t[14]=e("p",{class:"text-sm text-slate-500 mt-1"},"Bon retour, capsulier",-1))]),e("div",Ee,[e("div",{class:b(["flex items-center gap-2 px-3 py-1.5 rounded-lg border text-xs",i.value?"bg-red-500/10 border-red-500/30":"bg-emerald-500/10 border-emerald-500/30"]),title:i.value?"ESI indisponible":`ESI OK - ${((z=(j=h.value)==null?void 0:j.players)==null?void 0:z.toLocaleString())||0} joueurs en ligne`},[e("div",{class:b(["w-2 h-2 rounded-full",i.value?"bg-red-500":"bg-emerald-500 animate-pulse"])},null,2),e("span",{class:b(i.value?"text-red-400":"text-emerald-400")}," ESI "+r(i.value?"DOWN":"OK"),3),(L=h.value)!=null&&L.players&&!i.value?(a(),l("span",Ve,r((h.value.players/1e3).toFixed(1))+"k ",1)):v("",!0)],10,Ne),(B=n.value)!=null&&B.allianceId?(a(),l("div",$e,[e("img",{src:`https://images.evetech.net/alliances/${n.value.allianceId}/logo?size=32`,class:"w-6 h-6"},null,8,Oe),e("span",He,r(n.value.allianceName),1)])):v("",!0),(E=n.value)!=null&&E.corporationId?(a(),l("div",De,[e("img",{src:`https://images.evetech.net/corporations/${n.value.corporationId}/logo?size=32`,class:"w-6 h-6"},null,8,Te),e("span",Pe,r(n.value.corporationName),1)])):v("",!0)])])]),e("div",Ae,[e("div",Fe,[Q(s.$slots,"default")])])])])])}}});export{Je as _};
