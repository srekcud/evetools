import{d as X,u as Z,o as ee,j as y,i as F,w as _,r as b,h as a,b as e,c as l,l as u,t as n,e as v,F as S,k as N,n as h,m as P,T as W,q as j,s as z,v as K,p as B}from"./index-eOzsbP3j.js";import{u as te}from"./useFormatters-SlNtu6dn.js";import{_ as se}from"./MainLayout.vue_vue_type_style_index_0_lang-BsVw6yHB.js";const oe={class:"flex items-center justify-between mb-8"},ae=["disabled"],le={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ne={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re={key:0,class:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 flex items-center justify-between backdrop-blur-sm"},ie={key:1,class:"flex flex-col items-center justify-center py-24"},de={class:"mb-10"},ue={key:0,class:"relative group"},ce={class:"relative bg-gradient-to-br from-slate-900 via-slate-900 to-amber-950/20 rounded-2xl border border-amber-500/40 p-6 overflow-hidden"},ve={class:"flex items-start gap-6"},me={class:"relative flex-shrink-0"},pe={class:"relative"},be=["src","alt"],he={class:"flex-1 min-w-0"},xe={class:"text-xl font-bold text-slate-100 tracking-wide"},ge={class:"text-slate-400 mt-0.5"},fe={key:0,class:"text-sm text-amber-400/80 mt-0.5"},ke={class:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-slate-700/50"},we={class:"text-lg font-semibold text-cyan-400 font-mono"},ye={class:"text-sm text-slate-200"},_e={class:"text-amber-400"},Me={class:"text-xs text-slate-400"},Ce={key:0,class:"text-slate-500"},Se={key:1,class:"text-sm text-slate-500 italic"},je={class:"flex-shrink-0"},ze=["disabled"],Be={key:1,class:"bg-slate-900/50 rounded-2xl border border-dashed border-slate-700 p-12 text-center"},$e={key:0,class:"mb-10"},Ie={class:"text-xs font-semibold text-cyan-400 uppercase tracking-widest mb-4 flex items-center gap-2"},Te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ae={class:"relative flex items-start gap-4"},Ve=["src","alt"],He={class:"flex-1 min-w-0"},Le={class:"font-semibold text-slate-100 truncate group-hover:text-cyan-300 transition-colors"},Ee={class:"text-sm text-slate-400 truncate"},Fe={class:"flex items-center gap-2 mt-2"},Ne={class:"mt-3 pt-3 border-t border-slate-700/50"},qe={class:"text-sm font-semibold text-cyan-400 font-mono group-hover:text-cyan-300 transition-colors"},Re={key:0,class:"mt-2"},De={class:"text-sm text-slate-300"},Ue={class:"text-amber-400"},Pe={class:"text-xs text-slate-500"},We={key:0},Ke={key:1,class:"mt-2"},Qe={class:"relative flex items-center justify-end gap-1 mt-4 pt-3 border-t border-slate-700/30"},Ge=["onClick","disabled","title"],Oe=["onClick","disabled"],Ye=["onClick","disabled"],Je={key:1,class:"mb-10"},Xe={class:"text-xs font-semibold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2"},Ze={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},et={class:"relative flex items-start gap-4"},tt=["src","alt"],st={class:"flex-1 min-w-0"},ot={class:"font-semibold text-slate-200 truncate group-hover:text-slate-100 transition-colors"},at={class:"text-sm text-slate-500 truncate"},lt={key:0,class:"text-xs text-slate-600 truncate"},nt={class:"flex items-center gap-2 mt-2"},rt={class:"mt-3 pt-3 border-t border-slate-700/30"},it={class:"text-sm font-semibold text-cyan-400/80 font-mono group-hover:text-cyan-400 transition-colors"},dt={key:1,class:"mt-2"},ut={class:"text-sm text-slate-300"},ct={class:"text-amber-400"},vt={class:"text-xs text-slate-500"},mt={key:0},pt={key:2,class:"mt-2"},bt={class:"relative flex items-center justify-end gap-1 mt-4 pt-3 border-t border-slate-700/30"},ht=["onClick","disabled","title"],xt=["onClick","disabled"],gt=["onClick","disabled"],ft={key:2,class:"text-center py-16 bg-slate-900/30 rounded-2xl border border-dashed border-slate-700"},kt=["disabled"],wt={key:0,class:"bg-slate-900 rounded-2xl border border-slate-700/50 max-w-sm w-full p-6 shadow-2xl"},yt={class:"text-slate-400 text-sm mb-6"},_t={class:"text-slate-200"},Mt={class:"flex gap-3"},Ct=["disabled"],St=["disabled"],jt={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},zt={key:0,class:"bg-slate-900 rounded-2xl border border-slate-700/50 max-w-sm w-full p-6 shadow-2xl"},Bt={class:"text-slate-400 text-sm mb-4"},$t={class:"text-slate-200"},It={key:0,class:"text-amber-400 text-sm mb-6 p-3 bg-amber-500/10 rounded-xl border border-amber-500/20 flex items-start gap-2"},Tt={class:"flex gap-3"},At=["disabled"],Vt=["disabled"],Ht={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qt=X({__name:"Characters",setup(Lt){const x=Z(),{formatIsk:$}=te(),g=b([]),M=b(new Map),c=b(new Map),I=b(!0),i=b(!1),m=b(""),f=b(!1),k=b(!1),p=b(null),r=B(()=>g.value.find(o=>o.isMain)),T=B(()=>g.value.filter(o=>!o.isMain)),A=B(()=>T.value.filter(o=>{var t;return o.corporationId===((t=r.value)==null?void 0:t.corporationId)})),V=B(()=>T.value.filter(o=>{var t;return o.corporationId!==((t=r.value)==null?void 0:t.corporationId)}));function H(o){const t=new Date(o),s=new Date,d=t.getTime()-s.getTime();if(d<=0)return"Done";const w=Math.floor(d/(1e3*60*60*24)),C=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),U=Math.floor(d%(1e3*60*60)/(1e3*60));return w>0?`${w}j ${C}h`:C>0?`${C}h ${U}m`:`${U}m`}function L(o){return o?{1:"I",2:"II",3:"III",4:"IV",5:"V"}[o]??`${o}`:""}ee(async()=>{await Promise.all([Q(),G(),O()])});async function Q(){I.value=!0,m.value="";try{const o=await y("/api/me/characters",{headers:{Authorization:`Bearer ${x.token}`}});if(!o.ok)throw new Error("Failed to fetch characters");const t=await o.json();g.value=t.member||t["hydra:member"]||t||[]}catch(o){m.value="Failed to load characters",console.error(o)}finally{I.value=!1}}async function G(){try{const o=await y("/api/me/wallets",{headers:{Authorization:`Bearer ${x.token}`}});if(!o.ok)return;const t=await o.json(),s=new Map;for(const d of t.wallets||[])s.set(d.characterId,d.balance);M.value=s}catch(o){console.error("Failed to fetch wallets",o)}}async function O(){try{const o=await y("/api/me/skillqueues",{headers:{Authorization:`Bearer ${x.token}`}});if(!o.ok)return;const t=await o.json(),s=new Map;for(const d of t.skillQueues||[])s.set(d.characterId,d);c.value=s}catch(o){console.error("Failed to fetch skill queues",o)}}async function q(){i.value=!0,m.value="";try{const t=await(await fetch("/auth/eve/redirect",{headers:{Authorization:`Bearer ${x.token}`}})).json();t.redirect_url?(sessionStorage.setItem("eve_oauth_state",t.state),sessionStorage.setItem("eve_oauth_action","add-character"),window.location.href=t.redirect_url):m.value="Failed to get redirect URL"}catch(o){m.value="Connection error",console.error(o)}finally{i.value=!1}}function R(o){p.value=o,f.value=!0}async function Y(){if(p.value){i.value=!0,m.value="";try{const o=await y(`/api/me/characters/${p.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${x.token}`}});if(!o.ok){const t=await o.json();throw new Error(t.message||"Failed to delete character")}g.value=g.value.filter(t=>{var s;return t.id!==((s=p.value)==null?void 0:s.id)}),f.value=!1,p.value=null}catch(o){m.value=o.message||"Failed to delete character",console.error(o)}finally{i.value=!1}}}function D(o){p.value=o,k.value=!0}async function J(){if(p.value){i.value=!0,m.value="";try{const o=await y(`/api/me/characters/${p.value.id}/set-main`,{method:"POST",headers:{Authorization:`Bearer ${x.token}`,"Content-Type":"application/json"}});if(!o.ok){const t=await o.json();throw new Error(t.message||"Failed to set main character")}g.value=g.value.map(t=>{var s;return{...t,isMain:t.id===((s=p.value)==null?void 0:s.id)}}),await x.fetchUser(),k.value=!1,p.value=null}catch(o){m.value=o.message||"Failed to set main character",console.error(o)}finally{i.value=!1}}}async function E(o){i.value=!0,m.value="";try{const s=await(await fetch("/auth/eve/redirect",{headers:{Authorization:`Bearer ${x.token}`}})).json();s.redirect_url?(sessionStorage.setItem("eve_oauth_state",s.state),sessionStorage.setItem("eve_oauth_action","reauthorize"),sessionStorage.setItem("eve_oauth_character_id",o.id),window.location.href=s.redirect_url):m.value="Failed to get redirect URL"}catch(t){m.value="Connection error",console.error(t)}finally{i.value=!1}}return(o,t)=>(a(),F(se,null,{default:_(()=>[e("div",oe,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-100 tracking-wide"},"Personnages"),e("p",{class:"text-slate-400 mt-1"},"Gérez vos personnages EVE liés")],-1)),e("button",{onClick:q,disabled:i.value,class:"px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(a(),l("svg",le,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(a(),l("svg",ne,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"},null,-1)])])),t[8]||(t[8]=u(" Ajouter un personnage ",-1))],8,ae)]),m.value?(a(),l("div",re,[e("span",null,n(m.value),1),e("button",{onClick:t[0]||(t[0]=s=>m.value=""),class:"text-red-400 hover:text-red-300 transition-colors"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):v("",!0),I.value?(a(),l("div",ie,[...t[11]||(t[11]=[e("div",{class:"relative"},[e("div",{class:"w-16 h-16 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin"}),e("div",{class:"absolute inset-0 w-16 h-16 border-4 border-transparent border-b-cyan-400/50 rounded-full animate-spin",style:{"animation-direction":"reverse","animation-duration":"1.5s"}})],-1),e("p",{class:"text-slate-400 mt-6 animate-pulse"},"Chargement des personnages...",-1)])])):(a(),l(S,{key:2},[e("section",de,[t[18]||(t[18]=e("h2",{class:"text-xs font-semibold text-cyan-400 uppercase tracking-widest mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),u(" Personnage principal ")],-1)),r.value?(a(),l("div",ue,[t[16]||(t[16]=e("div",{class:"absolute -inset-0.5 bg-gradient-to-r from-amber-500/50 via-amber-400/30 to-amber-500/50 rounded-2xl blur opacity-40 group-hover:opacity-60 transition-opacity duration-500"},null,-1)),e("div",ce,[t[15]||(t[15]=e("div",{class:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-amber-400 to-amber-500"},null,-1)),e("div",ve,[e("div",me,[e("div",pe,[e("img",{src:`https://images.evetech.net/characters/${r.value.eveCharacterId}/portrait?size=256`,alt:r.value.name,class:"w-24 h-24 rounded-xl border-2 border-amber-500/50 shadow-lg shadow-amber-500/20"},null,8,be),t[12]||(t[12]=e("div",{class:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-amber-400 to-amber-600 rounded-full flex items-center justify-center shadow-lg shadow-amber-500/40 animate-pulse",style:{"animation-duration":"2s"}},[e("svg",{class:"w-5 h-5 text-amber-900",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])],-1))])]),e("div",he,[e("h3",xe,n(r.value.name),1),e("p",ge,n(r.value.corporationName),1),r.value.allianceName?(a(),l("p",fe,n(r.value.allianceName),1)):v("",!0),e("div",ke,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wide"},"Wallet",-1)),e("p",we,n(N($)(M.value.get(r.value.id),1))+" ISK",1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"text-xs text-slate-500 uppercase tracking-wide"},"Entraînement",-1)),c.value.get(r.value.id)?(a(),l(S,{key:0},[e("p",ye,[u(n(c.value.get(r.value.id).skillName)+" ",1),e("span",_e,n(L(c.value.get(r.value.id).finishedLevel)),1)]),e("p",Me,[u(n(H(c.value.get(r.value.id).finishDate))+" ",1),c.value.get(r.value.id).queueSize>1?(a(),l("span",Ce," ("+n(c.value.get(r.value.id).queueSize)+" en file) ",1)):v("",!0)])],64)):(a(),l("p",Se,"Aucun skill en cours"))])]),e("div",{class:h(["inline-flex items-center gap-2 mt-4 px-3 py-1.5 rounded-lg text-sm font-medium",r.value.hasValidToken?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":r.value.hasMissingScopes?"bg-amber-500/10 text-amber-400 border border-amber-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"])},[e("span",{class:h(["w-2 h-2 rounded-full",r.value.hasValidToken?"bg-emerald-400 animate-pulse":r.value.hasMissingScopes?"bg-amber-400":"bg-red-400"])},null,2),u(" "+n(r.value.hasValidToken?"Token valide":r.value.hasMissingScopes?"Scopes manquants":"Token expiré"),1)],2)]),e("div",je,[!r.value.hasValidToken||r.value.hasMissingScopes?(a(),l("button",{key:0,onClick:t[1]||(t[1]=s=>E(r.value)),disabled:i.value,class:h(["px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 border",r.value.hasMissingScopes?"bg-amber-500/20 hover:bg-amber-500/30 text-amber-400 border-amber-500/30":"bg-red-500/20 hover:bg-red-500/30 text-red-400 border-red-500/30"])}," Ré-autoriser ",10,ze)):v("",!0)])])])])):(a(),l("div",Be,[...t[17]||(t[17]=[e("svg",{class:"w-16 h-16 mx-auto text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),e("p",{class:"text-slate-500"},"Aucun personnage principal défini",-1)])]))]),A.value.length>0?(a(),l("section",$e,[e("h2",Ie,[t[19]||(t[19]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),u(" Même corporation ("+n(A.value.length)+") ",1)]),e("div",Te,[(a(!0),l(S,null,P(A.value,s=>(a(),l("div",{key:s.id,class:"group relative bg-slate-900/80 rounded-xl border border-slate-700/50 hover:border-cyan-500/40 p-5 overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-cyan-500/10 hover:-translate-y-1"},[t[26]||(t[26]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-cyan-500/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out"},null,-1)),e("div",Ae,[e("img",{src:`https://images.evetech.net/characters/${s.eveCharacterId}/portrait?size=128`,alt:s.name,class:"w-16 h-16 rounded-lg border border-slate-700 group-hover:border-cyan-500/30 transition-colors"},null,8,Ve),e("div",He,[e("h4",Le,n(s.name),1),e("p",Ee,n(s.corporationName),1),e("div",Fe,[e("span",{class:h(["inline-flex items-center gap-1.5 text-xs px-2 py-0.5 rounded-md",s.hasValidToken?"bg-emerald-500/10 text-emerald-400":s.hasMissingScopes?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"])},[e("span",{class:h(["w-1.5 h-1.5 rounded-full",s.hasValidToken?"bg-emerald-400":s.hasMissingScopes?"bg-amber-400":"bg-red-400"])},null,2),u(" "+n(s.hasValidToken?"Valide":s.hasMissingScopes?"Scopes manquants":"Expiré"),1)],2)]),e("div",Ne,[t[20]||(t[20]=e("p",{class:"text-xs text-slate-500"},"Wallet",-1)),e("p",qe,n(N($)(M.value.get(s.id),1))+" ISK",1)]),c.value.get(s.id)?(a(),l("div",Re,[t[21]||(t[21]=e("p",{class:"text-xs text-slate-500"},"Entraînement",-1)),e("p",De,[u(n(c.value.get(s.id).skillName)+" ",1),e("span",Ue,n(L(c.value.get(s.id).finishedLevel)),1)]),e("p",Pe,[u(n(H(c.value.get(s.id).finishDate))+" ",1),c.value.get(s.id).queueSize>1?(a(),l("span",We," ("+n(c.value.get(s.id).queueSize)+" en file) ",1)):v("",!0)])])):(a(),l("div",Ke,[...t[22]||(t[22]=[e("p",{class:"text-xs text-slate-500"},"Entraînement",-1),e("p",{class:"text-xs text-red-400 italic"},"Aucun skill en cours",-1)])]))])]),e("div",Qe,[!s.hasValidToken||s.hasMissingScopes?(a(),l("button",{key:0,onClick:d=>E(s),disabled:i.value,class:h(["p-2 rounded-lg transition-colors disabled:opacity-50",s.hasMissingScopes?"hover:bg-amber-500/10 text-amber-400 hover:text-amber-300":"hover:bg-red-500/10 text-slate-400 hover:text-red-400"]),title:s.hasMissingScopes?"Update scopes":"Re-authorize"},[...t[23]||(t[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,Ge)):v("",!0),e("button",{onClick:d=>D(s),disabled:i.value,class:"p-2 rounded-lg hover:bg-amber-500/10 text-slate-400 hover:text-amber-400 transition-colors disabled:opacity-50",title:"Set as Main"},[...t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1)])],8,Oe),e("button",{onClick:d=>R(s),disabled:i.value,class:"p-2 rounded-lg hover:bg-red-500/10 text-slate-400 hover:text-red-400 transition-colors disabled:opacity-50",title:"Remove"},[...t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ye)])]))),128))])])):v("",!0),V.value.length>0?(a(),l("section",Je,[e("h2",Xe,[t[27]||(t[27]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})],-1)),u(" Autres corporations ("+n(V.value.length)+") ",1)]),e("div",Ze,[(a(!0),l(S,null,P(V.value,s=>(a(),l("div",{key:s.id,class:"group relative bg-slate-900/60 rounded-xl border border-slate-800/50 hover:border-slate-500/40 p-5 overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-slate-500/5 hover:-translate-y-1"},[t[34]||(t[34]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-400/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out"},null,-1)),e("div",et,[e("img",{src:`https://images.evetech.net/characters/${s.eveCharacterId}/portrait?size=128`,alt:s.name,class:"w-16 h-16 rounded-lg border border-slate-700 opacity-80 group-hover:opacity-100 transition-opacity"},null,8,tt),e("div",st,[e("h4",ot,n(s.name),1),e("p",at,n(s.corporationName),1),s.allianceName?(a(),l("p",lt,n(s.allianceName),1)):v("",!0),e("div",nt,[e("span",{class:h(["inline-flex items-center gap-1.5 text-xs px-2 py-0.5 rounded-md",s.hasValidToken?"bg-emerald-500/10 text-emerald-400":s.hasMissingScopes?"bg-amber-500/10 text-amber-400":"bg-red-500/10 text-red-400"])},[e("span",{class:h(["w-1.5 h-1.5 rounded-full",s.hasValidToken?"bg-emerald-400":s.hasMissingScopes?"bg-amber-400":"bg-red-400"])},null,2),u(" "+n(s.hasValidToken?"Valide":s.hasMissingScopes?"Scopes manquants":"Expiré"),1)],2)]),e("div",rt,[t[28]||(t[28]=e("p",{class:"text-xs text-slate-500"},"Wallet",-1)),e("p",it,n(N($)(M.value.get(s.id),1))+" ISK",1)]),c.value.get(s.id)?(a(),l("div",dt,[t[29]||(t[29]=e("p",{class:"text-xs text-slate-500"},"Entraînement",-1)),e("p",ut,[u(n(c.value.get(s.id).skillName)+" ",1),e("span",ct,n(L(c.value.get(s.id).finishedLevel)),1)]),e("p",vt,[u(n(H(c.value.get(s.id).finishDate))+" ",1),c.value.get(s.id).queueSize>1?(a(),l("span",mt," ("+n(c.value.get(s.id).queueSize)+" en file) ",1)):v("",!0)])])):(a(),l("div",pt,[...t[30]||(t[30]=[e("p",{class:"text-xs text-slate-500"},"Entraînement",-1),e("p",{class:"text-xs text-red-400 italic"},"Aucun skill en cours",-1)])]))])]),e("div",bt,[!s.hasValidToken||s.hasMissingScopes?(a(),l("button",{key:0,onClick:d=>E(s),disabled:i.value,class:h(["p-2 rounded-lg transition-colors disabled:opacity-50",s.hasMissingScopes?"hover:bg-amber-500/10 text-amber-400 hover:text-amber-300":"hover:bg-red-500/10 text-slate-400 hover:text-red-400"]),title:s.hasMissingScopes?"Update scopes":"Re-authorize"},[...t[31]||(t[31]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,ht)):v("",!0),e("button",{onClick:d=>D(s),disabled:i.value,class:"p-2 rounded-lg hover:bg-amber-500/10 text-slate-400 hover:text-amber-400 transition-colors disabled:opacity-50",title:"Set as Main"},[...t[32]||(t[32]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})],-1)])],8,xt),e("button",{onClick:d=>R(s),disabled:i.value,class:"p-2 rounded-lg hover:bg-red-500/10 text-slate-400 hover:text-red-400 transition-colors disabled:opacity-50",title:"Remove"},[...t[33]||(t[33]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,gt)])]))),128))])])):v("",!0),T.value.length===0?(a(),l("div",ft,[t[36]||(t[36]=e("svg",{class:"w-16 h-16 mx-auto text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)),t[37]||(t[37]=e("p",{class:"text-slate-500 mb-4"},"Aucun alt lié",-1)),e("button",{onClick:q,disabled:i.value,class:"px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mx-auto"},[...t[35]||(t[35]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),u(" Ajouter un personnage ",-1)])],8,kt)])):v("",!0)],64)),(a(),F(W,{to:"body"},[j(z,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[f.value?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:t[3]||(t[3]=K(s=>f.value=!1,["self"]))},[j(z,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:_(()=>{var s;return[f.value?(a(),l("div",wt,[t[41]||(t[41]=e("div",{class:"flex items-center gap-4 mb-4"},[e("div",{class:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])]),e("div",null,[e("h3",{class:"text-lg font-semibold text-slate-100"},"Remove Character"),e("p",{class:"text-sm text-slate-400"},"This action cannot be undone")])],-1)),e("p",yt,[t[38]||(t[38]=u(" Remove ",-1)),e("strong",_t,n((s=p.value)==null?void 0:s.name),1),t[39]||(t[39]=u("? This will delete all cached data for this character. ",-1))]),e("div",Mt,[e("button",{onClick:t[2]||(t[2]=d=>f.value=!1),disabled:i.value,class:"flex-1 py-2.5 bg-slate-800 hover:bg-slate-700 rounded-xl text-slate-300 font-medium transition-colors disabled:opacity-50"}," Cancel ",8,Ct),e("button",{onClick:Y,disabled:i.value,class:"flex-1 py-2.5 bg-red-600 hover:bg-red-500 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},[i.value?(a(),l("svg",jt,[...t[40]||(t[40]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):v("",!0),u(" "+n(i.value?"Removing...":"Remove"),1)],8,St)])])):v("",!0)]}),_:1})])):v("",!0)]),_:1})])),(a(),F(W,{to:"body"},[j(z,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_(()=>[k.value?(a(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",onClick:t[5]||(t[5]=K(s=>k.value=!1,["self"]))},[j(z,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:_(()=>{var s,d,w;return[k.value?(a(),l("div",zt,[t[46]||(t[46]=e("div",{class:"flex items-center gap-4 mb-4"},[e("div",{class:"w-12 h-12 rounded-xl bg-amber-500/10 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])]),e("div",null,[e("h3",{class:"text-lg font-semibold text-slate-100"},"Set as Main"),e("p",{class:"text-sm text-slate-400"},"Change your main character")])],-1)),e("p",Bt,[t[42]||(t[42]=u(" Make ",-1)),e("strong",$t,n((s=p.value)==null?void 0:s.name),1),t[43]||(t[43]=u(" your main character? ",-1))]),((d=p.value)==null?void 0:d.corporationId)!==((w=r.value)==null?void 0:w.corporationId)?(a(),l("div",It,[...t[44]||(t[44]=[e("svg",{class:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("span",null,"This character is in a different corporation. Your corp reference will change.",-1)])])):v("",!0),e("div",Tt,[e("button",{onClick:t[4]||(t[4]=C=>k.value=!1),disabled:i.value,class:"flex-1 py-2.5 bg-slate-800 hover:bg-slate-700 rounded-xl text-slate-300 font-medium transition-colors disabled:opacity-50"}," Cancel ",8,At),e("button",{onClick:J,disabled:i.value,class:"flex-1 py-2.5 bg-amber-600 hover:bg-amber-500 rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2"},[i.value?(a(),l("svg",Ht,[...t[45]||(t[45]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):v("",!0),u(" "+n(i.value?"Updating...":"Confirm"),1)],8,Vt)])])):v("",!0)]}),_:1})])):v("",!0)]),_:1})]))]),_:1}))}});export{qt as default};
