import{u as E}from"./useFormatters-SlNtu6dn.js";import{u as U}from"./useEveImages-B3tDia7r.js";import{d as H,c as n,b as t,l as d,t as o,e as u,k as a,L as J,F as A,m as q,r as j,p,h as l,n as k}from"./index-DyXu58aN.js";const P={class:"space-y-4"},W={class:"bg-cyan-900/30 border border-cyan-500/30 rounded-lg p-3 flex items-center gap-3"},D={class:"text-cyan-300 text-sm"},R={key:0,class:"bg-yellow-900/30 border border-yellow-500/30 rounded-xl p-4"},Q={class:"text-yellow-400 font-medium mb-2"},G={class:"text-yellow-300/70 text-sm"},K={key:1,class:"bg-yellow-900/30 border border-yellow-500/30 rounded-xl p-4 text-yellow-400"},O={key:2,class:"bg-amber-900/30 border border-amber-500/50 rounded-lg p-3"},X={class:"flex items-center justify-between gap-3"},Y={class:"flex items-center gap-3"},Z={class:"text-sm"},_={class:"text-amber-400/70 text-xs mt-0.5"},tt=["disabled"],et={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},st={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ot={key:3,class:"text-xs text-slate-500 flex items-center gap-2"},nt={class:"bg-slate-800/50 rounded-lg p-4 border border-slate-700"},lt={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"},rt={class:"text-lg font-mono text-slate-200"},it={class:"text-lg font-mono text-cyan-400"},at={class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},ut={class:"text-lg font-mono text-purple-400"},dt={class:"text-lg font-mono text-green-400 font-bold"},ct={class:"flex flex-wrap gap-3"},mt={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xt={key:1,class:"w-4 h-4 text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pt={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ht={key:1,class:"w-4 h-4 text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt=["disabled"],yt={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},vt={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ft={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},bt={key:1,class:"w-4 h-4 text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kt={class:"bg-slate-900/50 backdrop-blur border border-slate-700 rounded-xl overflow-hidden"},wt={class:"p-4 border-b border-slate-700/50 flex items-center justify-between"},Ct={class:"text-lg font-semibold text-slate-200"},jt={class:"flex items-center gap-4 text-sm"},Lt={class:"flex items-center gap-2"},St={class:"text-slate-400"},Bt={class:"flex items-center gap-2"},Mt={class:"text-slate-400"},It={class:"overflow-x-auto"},Tt={class:"w-full text-sm"},$t={class:"bg-slate-800/50 text-slate-400 text-xs uppercase tracking-wider"},zt={class:"px-4 py-3 text-right"},Ft={class:"divide-y divide-slate-700/30"},Nt={class:"px-4 py-3"},Vt={class:"flex items-center gap-3"},Et=["src","alt"],Ut={class:"text-slate-200"},Ht={class:"px-4 py-3 text-right text-slate-300 font-mono"},Jt={class:"px-4 py-3 text-right text-slate-400 font-mono text-xs"},At={class:"px-4 py-3 text-center"},qt={key:1,class:"text-slate-500"},Rt=H({__name:"ShoppingListResults",props:{items:{},totals:{},structureName:{},notFound:{},priceError:{},structureAccessible:{type:Boolean},structureFromCache:{type:Boolean},structureLastSync:{},isSyncing:{type:Boolean},isSharing:{type:Boolean},readonly:{type:Boolean},shareUrl:{}},emits:["syncStructure","share"],setup(s,{emit:I}){const m=s,L=I,{formatIsk:x,formatNumber:w,formatDateTime:T}=E(),{getTypeIconUrl:$,onImageError:S}=U(),h=j(!1),g=j(!1),y=j(!1);function z(){m.shareUrl&&(navigator.clipboard.writeText(m.shareUrl),y.value=!0,setTimeout(()=>y.value=!1,2e3))}const v=p(()=>m.items.filter(i=>i.bestLocation==="jita"||i.bestLocation===null)),f=p(()=>m.items.filter(i=>i.bestLocation==="structure")),F=p(()=>v.value.map(i=>`${i.typeName}	${i.quantity}`).join(`
`)),N=p(()=>f.value.map(i=>`${i.typeName}	${i.quantity}`).join(`
`)),c=p(()=>{var i;return((i=m.structureName)==null?void 0:i.split(" - ")[0])||"Structure"});function V(i){if(!i)return"";const e=new Date(i),C=new Date().getTime()-e.getTime(),b=Math.floor(C/6e4),M=Math.floor(b/60);return b<1?"il y a moins d'une minute":b<60?`il y a ${b} min`:M<24?`il y a ${M}h`:T(i)}function B(i,e){i&&(navigator.clipboard.writeText(i),e==="jita"?(h.value=!0,setTimeout(()=>h.value=!1,2e3)):(g.value=!0,setTimeout(()=>g.value=!1,2e3)))}return(i,e)=>(l(),n("div",P,[t("div",W,[e[7]||(e[7]=t("svg",{class:"w-5 h-5 text-cyan-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",D,[e[5]||(e[5]=d(" Les prix affiches sont les ",-1)),e[6]||(e[6]=t("span",{class:"font-medium"},"ordres de vente les plus bas",-1)),d(" (Jita Sell et "+o(c.value)+" Sell). ",1)])]),s.notFound&&s.notFound.length>0?(l(),n("div",R,[t("h3",Q,"Items non trouves ("+o(s.notFound.length)+")",1),t("p",G,o(s.notFound.join(", ")),1)])):u("",!0),s.priceError?(l(),n("div",K,o(s.priceError),1)):u("",!0),s.structureAccessible===!1&&!s.priceError&&!s.readonly?(l(),n("div",O,[t("div",X,[t("div",Y,[e[9]||(e[9]=t("svg",{class:"w-5 h-5 text-amber-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),t("div",Z,[e[8]||(e[8]=t("p",{class:"text-amber-300"},"Prix de la structure non disponibles",-1)),t("p",_," Les donnees de marche pour "+o(s.structureName)+" n'ont pas ete synchronisees. ",1)])]),s.readonly?u("",!0):(l(),n("button",{key:0,onClick:e[0]||(e[0]=r=>L("syncStructure")),disabled:s.isSyncing,class:"px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white text-sm font-medium transition-colors flex items-center gap-2"},[s.isSyncing?(l(),n("svg",et,[...e[10]||(e[10]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(l(),n("svg",st,[...e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),d(" "+o(s.isSyncing?"Synchronisation...":"Synchroniser"),1)],8,tt))])])):u("",!0),s.structureFromCache&&s.structureLastSync?(l(),n("div",ot,[e[12]||(e[12]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d(" Prix "+o(c.value)+" mis a jour "+o(V(s.structureLastSync)),1)])):u("",!0),t("div",nt,[t("div",lt,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Volume total",-1)),t("p",rt,o(a(w)(s.totals.volume))+" m³",1)]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Jita + Transport",-1)),t("p",it,o(a(x)(s.totals.jitaWithImport)),1)]),t("div",null,[t("p",at,o(c.value),1),t("p",ut,o(a(x)(s.totals.structure)),1)]),t("div",null,[e[15]||(e[15]=t("p",{class:"text-xs text-slate-500 uppercase tracking-wider mb-1"},"Meilleur prix",-1)),t("p",dt,o(a(x)(s.totals.best)),1)])]),t("div",ct,[v.value.length>0?(l(),n("button",{key:0,onClick:e[1]||(e[1]=r=>B(F.value,"jita")),class:"flex items-center gap-2 px-4 py-2 bg-cyan-700 hover:bg-cyan-600 rounded-lg text-white text-sm font-medium transition-colors"},[h.value?(l(),n("svg",xt,[...e[17]||(e[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(l(),n("svg",mt,[...e[16]||(e[16]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),d(" "+o(h.value?"Copie !":`Copier Jita (${v.value.length})`),1)])):u("",!0),f.value.length>0?(l(),n("button",{key:1,onClick:e[2]||(e[2]=r=>B(N.value,"structure")),class:"flex items-center gap-2 px-4 py-2 bg-purple-700 hover:bg-purple-600 rounded-lg text-white text-sm font-medium transition-colors"},[g.value?(l(),n("svg",ht,[...e[19]||(e[19]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(l(),n("svg",pt,[...e[18]||(e[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),d(" "+o(g.value?"Copie !":`Copier ${c.value} (${f.value.length})`),1)])):u("",!0),e[24]||(e[24]=t("div",{class:"flex-1"},null,-1)),!s.readonly&&!s.shareUrl?(l(),n("button",{key:2,onClick:e[3]||(e[3]=r=>L("share")),disabled:s.isSharing,class:"flex items-center gap-2 px-4 py-2 bg-emerald-700 hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white text-sm font-medium transition-colors"},[s.isSharing?(l(),n("svg",yt,[...e[20]||(e[20]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(l(),n("svg",vt,[...e[21]||(e[21]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"},null,-1)])])),d(" "+o(s.isSharing?"Creation...":"Partager"),1)],8,gt)):u("",!0),s.shareUrl?(l(),n("button",{key:3,onClick:z,class:"flex items-center gap-2 px-4 py-2 bg-emerald-700 hover:bg-emerald-600 rounded-lg text-white text-sm font-medium transition-colors"},[y.value?(l(),n("svg",bt,[...e[23]||(e[23]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(l(),n("svg",ft,[...e[22]||(e[22]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},null,-1)])])),d(" "+o(y.value?"Lien copie !":"Copier le lien"),1)])):u("",!0)])]),J(i.$slots,"after-summary"),t("div",kt,[t("div",wt,[t("h3",Ct," Items ("+o(s.items.length)+") ",1),t("div",jt,[t("span",Lt,[e[25]||(e[25]=t("span",{class:"w-3 h-3 rounded-full bg-cyan-500"},null,-1)),t("span",St,"Jita ("+o(v.value.length)+")",1)]),t("span",Bt,[e[26]||(e[26]=t("span",{class:"w-3 h-3 rounded-full bg-purple-500"},null,-1)),t("span",Mt,o(c.value)+" ("+o(f.value.length)+")",1)])])]),t("div",It,[t("table",Tt,[t("thead",$t,[t("tr",null,[e[27]||(e[27]=t("th",{class:"px-4 py-3 text-left"},"Item",-1)),e[28]||(e[28]=t("th",{class:"px-4 py-3 text-right"},"Quantite",-1)),e[29]||(e[29]=t("th",{class:"px-4 py-3 text-right"},"Volume",-1)),e[30]||(e[30]=t("th",{class:"px-4 py-3 text-right"},"Jita + Import",-1)),t("th",zt,o(c.value),1),e[31]||(e[31]=t("th",{class:"px-4 py-3 text-center"},"Acheter a",-1))])]),t("tbody",Ft,[(l(!0),n(A,null,q(s.items,r=>(l(),n("tr",{key:r.typeId,class:k(["hover:bg-slate-800/30 transition-colors",{"bg-cyan-900/10":r.bestLocation==="jita","bg-purple-900/10":r.bestLocation==="structure"}])},[t("td",Nt,[t("div",Vt,[t("img",{src:a($)(r.typeId),alt:r.typeName,onError:e[4]||(e[4]=(...C)=>a(S)&&a(S)(...C)),class:"w-8 h-8 rounded"},null,40,Et),t("span",Ut,o(r.typeName),1)])]),t("td",Ht,o(a(w)(r.quantity)),1),t("td",Jt,o(a(w)(r.totalVolume))+" m³ ",1),t("td",{class:k(["px-4 py-3 text-right font-mono",r.bestLocation==="jita"||r.bestLocation===null?"text-cyan-400 font-medium":"text-slate-400"])},o(r.jitaWithImport!==null?a(x)(r.jitaWithImport):"-"),3),t("td",{class:k(["px-4 py-3 text-right font-mono",r.bestLocation==="structure"?"text-purple-400 font-medium":"text-slate-400"])},o(r.structureTotal!==null?a(x)(r.structureTotal):"-"),3),t("td",At,[r.bestLocation?(l(),n("span",{key:0,class:k(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",r.bestLocation==="jita"?"bg-cyan-900/50 text-cyan-300":"bg-purple-900/50 text-purple-300"])},o(r.bestLocation==="jita"?"Jita":c.value),3)):(l(),n("span",qt,"-"))])],2))),128))])])])])]))}});export{Rt as _};
