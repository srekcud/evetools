================================================================================
                         EVE Tools - Release Notes
================================================================================

--------------------------------------------------------------------------------
Version 0.11 (2026-02-20)
--------------------------------------------------------------------------------

### Analyse de couts industrie (nouveau)
- Onglet BPC Kit : couts de copie + comparaison des 9 decrypteurs d'invention
- Onglet Estimation : cout materiaux (Jita), cout d'installation jobs (ESI cost indices)
- Decomposition complete : materiaux, jobs, BPC, total par unite

### Marges de profit (nouveau)
- Onglet Margins : analyse prospective de rentabilite avant production
- 4 lieux de vente : Jita sell, structure undercut, structure instant, contrats publics
- Frais inclus : broker fee + sales tax (configurables dans Settings)
- Section invention T2 avec selection de decrypteur et recalcul temps reel
- Volume journalier pour evaluer la demande

### Contrats publics
- Sync periodique des contrats mono-item de The Forge (30min)
- Prix contrats integres comme 4e lieu de vente dans les marges

### ESI Cost Index
- Service de calcul des couts d'installation jobs (system cost indices + adjusted prices)
- Sync automatique des indices de cout et prix ajustes

### Qualite de code
- Enum IndustryActivityType (remplace 7 jeux de constantes dupliquees)
- Service TypeNameResolver (remplace 8+ methodes copiees-collees)
- Classe EveConstants (constantes centralisees)
- IndustryProjectService decoupe en 4 services (Factory, StepCalculator, ShoppingListBuilder, JobMatcher)
- Composant LoadingSpinner (remplace 34 SVG inline)
- Module ProfitTracker supprime (24 fichiers morts)
- 50 nouveaux tests unitaires

### Corrections
- Market : fallback ESI pour items non caches, images SKINs, null guards
- Industry : ME/TE par defaut depth > 0 = ME 10 / TE 20
- Messenger : 8 routes async manquantes (contrats, cost indices, alertes, purge)
- Notifications : fix crash .length sur undefined
- Swagger : 17 tags EN, layout user card
- SDE : fix activity IDs (invention=8, reaction=11), ajout probabilite

--------------------------------------------------------------------------------
Version 0.10 (2026-02-16)
--------------------------------------------------------------------------------

### Navigation rationalisee
- Sidebar groupee : 5 items + admin (Dashboard, Revenus, Production, Marche, Inventaire)
- Groupe collapsible Production (Industrie, Shopping List, Planetaire)
- Fusions : Escalations dans Ledger (onglet), Contracts dans Assets (onglet), Profit dans Industry (onglet)
- Deep linking avec redirections (/escalations -> /ledger?tab=escalations, etc.)
- Personnages deplace dans le user card (retire du nav)
- Etat collapse persiste dans localStorage

### Module Profit Tracker (nouveau)
- Calcul automatique du profit par item fabrique
- Matching jobs industrie termines avec transactions de vente wallet
- KPI : marge brute, marge nette, ROI, items les plus rentables
- Detail par item : cout materiaux, job install, taxes, prix de vente
- Panel items non-matches (jobs sans vente, ventes sans job)
- Graphique tendance de profit
- Settings : periode d'analyse, seuils de matching

### Module Market Browser (nouveau)
- Recherche d'items avec autocompletion
- Detail type : prix Jita sell/buy, spread, volume quotidien
- Historique de prix avec graphique (Chart.js)
- Order book (sell/buy orders)
- Comparaison prix Jita vs structure locale
- Alertes de prix (notification quand seuil atteint)
- Favoris marche

### Module Notifications (nouveau)
- Hub centralise de notifications
- Push browser via Service Workers (VAPID)
- Preferences par type de notification
- Badge compteur non-lus

### Admin ameliore
- Grille KPI admin
- Actions de maintenance
- Sync tracker etendu

### Corrections
- Fix Dockerfile : assets:install explicite (corrige 404 /api/docs en production)

--------------------------------------------------------------------------------
Version 0.9.1 (2026-02-16)
--------------------------------------------------------------------------------

### Market
- Volume journalier affiche dans les tooltips marche
- Amelioration couverture des tooltips prix

--------------------------------------------------------------------------------
Version 0.9 (2026-02-16)
--------------------------------------------------------------------------------

### Prix pondere par volume (Weighted Price)
- Calcul du prix moyen pondere en empilant les orders de marche
- Indicateur de profondeur de marche
- Avertissement si profondeur insuffisante pour la quantite demandee

### Open In-Game Window
- Boutons "ouvrir en jeu" sur les items (marche, info)
- Composant reutilisable OpenInGameButton
- Endpoints ESI : marketdetails, information

--------------------------------------------------------------------------------
Version 0.8 (2026-02-15)
--------------------------------------------------------------------------------

### Stack technique
- Upgrade PHP 8.5, Symfony 7.4, API Platform 4.2
- Migration vers FrankenPHP Alpine
- PHPStan level 8

### Valuator / Appraisal
- Estimation de valeur des assets par categorie
- Valorisation basee sur les prix Jita

### GDPR
- Mentions legales et email de contact
- Page Legal accessible depuis le footer

### i18n
- Registre international (dates, nombres)

--------------------------------------------------------------------------------
Version 0.7.0 (2026-02-14)
--------------------------------------------------------------------------------

### Internationalisation (i18n)
- Support bilingue francais/anglais sur l'ensemble du site (vue-i18n v11)
- Selecteur de langue FR/EN dans la modale de configuration
- Detection automatique de la langue du navigateur
- ~1050 cles de traduction couvrant toutes les vues et composants
- Messages Mercure backend convertis en anglais neutre

### Refactoring composants
- Decomposition des 6 vues volumineuses en composants (pattern Container/Presentational)
  - Escalations : 1751 -> 523 lignes (-70%)
  - Ledger : 1358 -> 191 lignes (-86%)
  - Planetary Interaction : 1266 -> 249 lignes (-80%)
  - Characters : 811 -> 487 lignes (-40%)
  - Admin : 775 -> 280 lignes (-64%)
  - Assets : 660 -> 447 lignes (-32%)
- 36 nouveaux fichiers : composants, composables, constantes
- Composants generiques reutilisables : ConfirmModal, ToastContainer, useToast, useContextMenu
- Composables extraits : usePlanetaryTimers, usePlanetaryHelpers, useEscalationTimers, useEscalationHelpers, useMiningPricing

--------------------------------------------------------------------------------
Version 0.6.5 (2026-02-14)
--------------------------------------------------------------------------------

### Planetary Interaction
- Flow View : remplacement du stockage ESI (peu fiable) par les flux calcules depuis les routes
- Valorisation ISK par colonie avec prix Jita des commodites PI (P1-P4)
- Couleurs et badges tier sur les outputs (extracteurs, factories, production)
- Indicateur securite systeme + barres volume stockage
- Timers extracteurs en vue repliee, label output, notice ESI stockage
- Traduction francaise complete du module PI

### Securite (OWASP)
- Headers securite Caddy (X-Frame-Options, HSTS, nosniff, Referrer-Policy)
- TTL blacklist JWT aligne sur la duree du token (1 semaine)
- Verification OAuth state CSRF (Redis cache, usage unique)

### Qualite
- PHPStan passe de level 4 a level 5 (4 erreurs corrigees)
- Roadmap i18n (vue-i18n v10) documentee pour V0.7

### Corrections
- Fix maintenance mode : simplifier Caddyfile + deployer proxy en dernier
- Fix scheduler : supprimer sync:// qui empechait la consommation

--------------------------------------------------------------------------------
Version 0.6 (2026-02-12)
--------------------------------------------------------------------------------

### Module Planetary Interaction (nouveau)
- Dashboard PI : vue d'ensemble de toutes les colonies par personnage
- KPI : colonies, extracteurs actifs, expirant bientot, revenu estime/jour
- Timers extracteurs en temps reel avec code couleur (vert >24h, orange <24h, rouge expire)
- Detail colonie : extracteurs, factories, stockage avec snapshot
- Tableau de production par tier (P0 a P4) avec volumes et valorisation ISK Jita
- Supply chain delta : surplus/deficit des inputs par produit (bleu surplus, rouge deficit)
- Badges planetes par type (temperate, barren, lava, ice, gas, oceanic, plasma, storm)
- Synchronisation ESI automatique (30 min) + sync manuelle
- Import SDE planet schematics (cycles, inputs/outputs)
- Notifications temps reel via Mercure

### Scope OAuth
- Nouveau scope requis : esi-planets.manage_planets.v1 (re-authentification necessaire)

--------------------------------------------------------------------------------
Version 0.5.3 (2026-02-12)
--------------------------------------------------------------------------------

### Interface
- Harmonisation du style sombre sur toutes les vues (pattern Industry)
- Panels : bg-slate-900 border-slate-800 (opaque, uniforme)
- Corrections visuelles Dashboard, Ledger, Escalations, Contracts, Admin, Characters

--------------------------------------------------------------------------------
Version 0.5.1 (2026-02-11)
--------------------------------------------------------------------------------

### Industrie
- Avertissement doublons lors du collage de stock avec achats lies
- Date de debut de projet visible sur les projets multi-product

--------------------------------------------------------------------------------
Version 0.5 (2026-02-11)
--------------------------------------------------------------------------------

### Industrie avancee
- Job matching separe : suivi des jobs ESI lies aux steps
- Achats lies aux steps depuis le wallet ESI (sync toutes les 20min)
- Skills personnages : sync ESI + override manuel, calcul temps par run
- Systemes favoris pour la selection automatique de structure
- Split/merge de steps de production
- Adaptation du stock en cascade
- Suggestions d'achats depuis les transactions wallet
- Shopping list : delta materiaux pour structures sous-optimales (+X)
- Multibuy Jita/Structure, stock inline editable
- Detection de structures sous-optimales
- Blacklist de structures masquees

### Frontend
- Stores modulaires (projects, steps, structures, purchases)
- Composables (useProjectTime, useShoppingList, useStockAnalysis)
- Onglets dedies (Steps, Approvisionnement)
- Configuration Skills et Systemes favoris

--------------------------------------------------------------------------------
Version 0.4.1 (2026-02-05)
--------------------------------------------------------------------------------

### Escalations
- Partage Discord : timer dynamique, lien Evetools, contact
- Modale de confirmation avant suppression
- Notes visibles sur les escalations perso et corp
- Noms complets des DED sites (ex: Cartel Prisoner Retention 8/10)
- Dropdown custom pour le type (fix dark mode Linux)

### Corrections
- Fix import SDE : Array to string conversion sur les effets dogma
- Fix popover visibilite tronquee quand peu d'escalations
- Fix scroll horizontal sur la page escalations

--------------------------------------------------------------------------------
Version 0.4 (2026-02-05)
--------------------------------------------------------------------------------

### Module Escalations (nouveau)
- Suivi des escalations DED (3/10 a 10/10) pour toutes les factions
- Timer 72h avec compte a rebours temps reel et code couleur
- 3 niveaux de visibilite : Perso, Corporation, Public
- Boutons de partage : copie WTS (format in-game) et Discord
- Page publique accessible sans authentification pour les escalations publiques
- Escalations corporation visibles en lecture seule par les membres
- Alerte lors du partage d'une escalation non bookmark
- KPI : total, nouveau/BM, en vente, vendues avec valeur ISK
- Filtres : statut, visibilite, personnage

### Session utilisateur
- Duree de session augmentee a 1 semaine (etait 1 heure)

### Interface
- Version et bouton de deconnexion regroupes dans le bloc utilisateur

--------------------------------------------------------------------------------
Version 0.3.1 (2026-02-04)
--------------------------------------------------------------------------------

### Corrections
- Fix import SDE : migration de YAML vers JSONL (streaming) pour eviter les OOM

--------------------------------------------------------------------------------
Version 0.3 (2026-02-03)
--------------------------------------------------------------------------------

### Module Ledger (PVE + Mining unifie)
- Nouveau module fusionnant PVE et Mining
- Dashboard avec KPI combines (Total, PVE, Mining)
- Graphique stacked bar (PVE + Mining par jour)
- Mining ledger avec valorisation des minerais (prix Jita)
- Anti-double comptage (setting corpProjectAccounting)
- Onglets Dashboard / PVE / Mining / Settings

--------------------------------------------------------------------------------
Version 0.2 (2026-02-02)
--------------------------------------------------------------------------------

### Architecture
- Migration complete vers API Platform (State Providers/Processors)
- Suppression des anciens controleurs API Symfony

### Temps reel (Mercure)
- Notifications en temps reel des synchronisations via Server-Sent Events
- Barre de progression pour les syncs longues (market, assets)
- Indicateur de statut de synchronisation dans l'interface

### Industrie
- Suivi du Time Efficiency (TE) pour les blueprints intermediaires
- Tracking partiel du stock (in_stock_quantity) pour les composants
- Arbre de production hierarchique (vue alternative)
- Cascade automatique du stock vers les sous-composants
- Seed des definitions de rigs depuis le SDE

### Listes de courses
- Partage de listes de courses via lien public (expire apres 1 semaine)
- Vue publique accessible sans authentification

### PVE
- Integration des projets corporation dans la detection du loot
- Verification automatique des contributions aux projets corpo

### Corrections
- Fix: erreur "Cannot access parentChildrenMap before initialization"
- Suppression des logs de debug OAuth

--------------------------------------------------------------------------------
Version 0.1.2 (2026-01-31)
--------------------------------------------------------------------------------

### Structures Industry - Partage Corporation
- Recherche de structures par nom via l'API ESI
- Auto-detection des structures appartenant a la corporation
- Soft-delete : les structures corpo supprimees restent disponibles pour reimport
- Partage des configurations de rigs avec les membres de la corporation
- Resolution des noms de systemes solaires dans les resultats de recherche
- Filtrage des rigs par taille selon la structure (M/L/XL)
- Limite de 3 rigs maximum par structure

### Gestion Rate Limit ESI
- Banniere d'alerte quand le rate limit ESI est atteint
- Blocage des actions ESI pendant le cooldown (60 secondes)
- Indicateur ESI orange (au lieu de rouge) sur erreur 420
- Rotation des tokens entre personnages pour distribuer les appels ESI

### Ameliorations
- Cache des informations de structure (owner, type, systeme solaire)
- Pre-chargement des infos de structure en arriere-plan (warmup)
- Exclusion des structures deja configurees dans les resultats de recherche

--------------------------------------------------------------------------------
Version 0.1.1 (2026-01-30)
--------------------------------------------------------------------------------

### Industry
- Configuration des structures de production avec rigs
- Calcul des bonus de materiaux (ME) et temps (TE)
- Support des Engineering Complexes (Raitaru, Azbel, Sotiyo)
- Support des Refineries (Athanor, Tatara)
- Liste de courses avec comparaison prix Jita vs structure locale

### Shopping List
- Calcul automatique des materiaux necessaires
- Comparaison des prix entre Jita et structure locale
- Calcul des couts de transport

### Corrections
- Divers correctifs de stabilite

--------------------------------------------------------------------------------
Version 0.1 (2026-01-29)
--------------------------------------------------------------------------------

### Premiere version
- Authentification EVE SSO (OAuth2)
- Gestion multi-personnages
- Synchronisation des assets
- Tableau de bord avec vue d'ensemble
- Module PVE pour le suivi des gains
- Module Contrats
- Interface moderne avec theme EVE Online

================================================================================
