import{E as me,r as B,p as V,G as F,d as he,o as fe,H as be,i as ve,w as ye,h as n,b as e,l as L,t as s,k as d,c as o,n as p,e as g,F as b,m as k,A as ne}from"./index-BrHa6dug.js";import{u as we}from"./useFormatters-CV5q413z.js";import{_ as ke}from"./MainLayout.vue_vue_type_style_index_0_lang-DJ721N8Q.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ce=me("planetary",()=>{const v=B([]),i=B(null),I=B([]),D=B(!1),y=B(!1),h=B(null),_=B(null),S=V(()=>{const u={};for(const x of v.value)u[x.characterId]||(u[x.characterId]={characterName:x.characterName,characterId:x.characterId,colonies:[]}),u[x.characterId].colonies.push(x);return Object.values(u)}),E=V(()=>v.value.filter(u=>u.status==="expired")),z=V(()=>v.value.filter(u=>u.status==="expiring")),$=V(()=>I.value.reduce((u,x)=>u+x.dailyIskValue,0));async function w(){D.value=!0,h.value=null;try{if(v.value=await F("/planetary"),v.value.length>0){const u=v.value.reduce((x,P)=>P.cachedAt>x?P.cachedAt:x,v.value[0].cachedAt);_.value=u}}catch(u){h.value=u instanceof Error?u.message:"Erreur lors du chargement des colonies"}finally{D.value=!1}}async function O(u){h.value=null;try{const x=await F(`/planetary/${u}`),P=v.value.findIndex(G=>G.id===u);return P!==-1&&(v.value[P]={...v.value[P],pins:x.pins,routes:x.routes}),x}catch(x){return h.value=x instanceof Error?x.message:"Erreur lors du chargement du detail",null}}async function C(){h.value=null;try{i.value=await F("/planetary/stats")}catch(u){h.value=u instanceof Error?u.message:"Erreur lors du chargement des statistiques"}}async function M(){h.value=null;try{const u=await F("/planetary/production");I.value=u.tiers}catch(u){h.value=u instanceof Error?u.message:"Erreur lors du chargement de la production"}}async function j(){y.value=!0,h.value=null;try{await F("/planetary/sync",{method:"POST",body:JSON.stringify({})}),await Promise.all([w(),C(),M()])}catch(u){h.value=u instanceof Error?u.message:"Erreur lors de la synchronisation"}finally{y.value=!1}}function N(){h.value=null}return{colonies:v,stats:i,production:I,isLoading:D,isSyncing:y,error:h,lastSyncAt:_,coloniesByCharacter:S,expiredColonies:E,expiringColonies:z,totalDailyIsk:$,fetchColonies:w,fetchColonyDetail:O,fetchStats:C,fetchProduction:M,syncColonies:j,clearError:N}}),Te={class:"space-y-6"},Be={class:"flex items-center justify-between"},Ie={class:"flex items-center gap-3"},Se={class:"text-xs text-slate-500"},je={class:"text-slate-400"},Pe=["disabled"],Ee={key:0,class:"flex items-center gap-3 px-4 py-3 bg-red-500/10 border border-red-500/30 rounded-lg"},Me={class:"text-red-400 text-sm"},Ne={key:1,class:"flex items-center justify-center py-20"},De={key:2,class:"flex flex-col items-center justify-center py-20 text-center"},Ae={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Le={class:"relative bg-slate-900 rounded-xl p-5 border border-slate-800 overflow-hidden scan-line"},Ve={class:"mt-2 text-3xl font-bold text-white font-mono-tech"},ze={class:"mt-1 text-xs text-slate-500"},$e={class:"relative bg-slate-900 rounded-xl p-5 border border-emerald-500/20 overflow-hidden"},He={class:"mt-2 flex items-baseline gap-3"},Fe={class:"text-3xl font-bold text-emerald-400 font-mono-tech"},Oe={key:0,class:"text-sm text-red-400 font-medium"},Re={class:"mt-1 text-xs text-slate-500"},Ue={class:"relative bg-slate-900 rounded-xl p-5 border border-amber-500/20 overflow-hidden"},qe={class:"mt-2 text-3xl font-bold text-amber-400 font-mono-tech"},Qe={class:"relative bg-slate-900 rounded-xl p-5 border border-cyan-500/20 overflow-hidden"},Ge={class:"mt-2 text-3xl font-bold text-cyan-400 font-mono-tech"},Je={key:0,class:"flex flex-wrap gap-2"},Ke={key:0,class:"flex items-center gap-2 px-3 py-1.5 bg-red-500/10 border border-red-500/30 rounded-lg text-sm"},We={class:"text-red-400"},Xe={class:"text-red-300/80 text-xs"},Ye={key:1,class:"flex items-center gap-2 px-3 py-1.5 bg-amber-500/10 border border-amber-500/30 rounded-lg text-sm"},Ze={class:"text-amber-400"},et={key:1,class:"bg-slate-900 rounded-xl border border-slate-800 p-5"},tt={class:"overflow-x-auto"},st={class:"w-full text-sm"},rt={class:"divide-y divide-slate-800"},at=["onClick"],nt={class:"py-2.5 pr-1"},ot={class:"py-2.5"},lt={class:"flex items-center gap-2"},it={class:"text-slate-400"},dt={key:0},ct={colspan:"5",class:"py-2 pl-2"},ut={class:"bg-slate-800/50 rounded-lg p-3"},xt={class:"flex items-center gap-4 text-[10px] text-slate-500 uppercase tracking-wider mb-2 px-1"},pt={key:0,class:"w-28 text-right"},gt={key:1,class:"w-24 text-right"},mt={class:"space-y-1.5"},ht={class:"flex items-center gap-2 flex-1"},ft={class:"text-slate-300"},bt={key:0,class:"text-slate-600 text-[10px]"},vt={key:0,class:"w-28 text-right text-slate-500 font-mono-tech"},yt={class:"w-14 text-right text-slate-400 font-mono-tech"},wt={key:1,class:"w-24 flex items-center gap-1.5 justify-end"},kt={key:1,class:"text-slate-500"},_t={class:"border-t border-slate-700"},Ct={class:"py-3 text-right text-cyan-400 font-bold"},Tt={class:"py-3 text-right text-cyan-400 font-bold font-mono-tech"},Bt={class:"flex items-center gap-3 px-2"},It={class:"w-8 h-8 rounded-full bg-slate-700 border border-slate-600 overflow-hidden flex items-center justify-center"},St=["src","alt"],jt={class:"text-xs text-slate-400 font-bold absolute"},Pt={class:"text-lg font-semibold text-white"},Et={class:"text-xs px-2 py-0.5 bg-slate-800 rounded-full text-slate-400"},Mt={class:"space-y-1"},Nt=["onClick"],Dt={class:"flex items-center gap-4"},At={class:"flex items-center gap-3 min-w-[240px]"},Lt={class:"flex items-center gap-2"},Vt={class:"text-white font-semibold text-[15px]"},zt={class:"flex items-center gap-1.5 text-xs text-slate-500"},$t={class:"flex items-center gap-1.5 min-w-[90px]"},Ht={class:"flex gap-0.5"},Ft={class:"min-w-[60px] text-center"},Ot={class:"text-white font-medium"},Rt={class:"flex items-center gap-3 flex-1"},Ut={key:0,class:"text-slate-500 text-xs italic"},qt={class:"text-right min-w-[100px]"},Qt={class:"text-xs text-slate-500"},Gt={key:0,class:"mt-0.5"},Jt={key:0,class:"border-t border-slate-800"},Kt={class:"px-5 py-4 space-y-5"},Wt={key:0},Xt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Yt={class:"flex items-center justify-between mb-2"},Zt={class:"flex items-center gap-2"},es={class:"text-white text-sm font-medium"},ts={class:"text-right"},ss={class:"grid grid-cols-3 gap-2 text-xs"},rs={class:"bg-slate-800/50 rounded px-2 py-1.5"},as={class:"text-white font-medium"},ns={class:"bg-slate-800/50 rounded px-2 py-1.5"},os={class:"text-white font-medium"},ls={class:"bg-slate-800/50 rounded px-2 py-1.5"},is={class:"text-white font-medium"},ds={class:"mt-2 flex items-center justify-between text-xs"},cs={class:"text-cyan-400 font-medium"},us={key:1},xs={class:"text-sm font-semibold text-slate-300 uppercase tracking-wider mb-3 flex items-center gap-2"},ps={class:"text-xs text-slate-500 font-normal"},gs={class:"overflow-x-auto"},ms={class:"w-full text-sm"},hs={class:"divide-y divide-slate-800"},fs={class:"py-2 text-white font-medium"},bs={class:"py-2"},vs={class:"text-cyan-300"},ys={class:"py-2 text-right text-slate-400 font-mono-tech"},ws={key:2},ks={class:"px-3 py-2"},_s={class:"flex items-center justify-between text-sm mb-1"},Cs={class:"text-slate-400"},Ts={class:"px-3 py-1.5 bg-amber-500/5 flex items-center gap-2"},Bs={class:"text-[10px] text-amber-400/70"},Is={class:"px-3 py-2 text-xs space-y-1"},Ss={key:3},js={class:"bg-slate-900 rounded-xl border border-slate-800 p-4"},Ps={class:"flex items-center justify-between flex-wrap gap-4"},Es={class:"flex items-center gap-6 text-xs flex-wrap"},Ms={class:"text-slate-500"},Ns=he({__name:"PlanetaryInteraction",setup(v){const i=Ce(),{formatIsk:I,formatTimeSince:D,formatNumber:y}=we(),h={temperate:{gradient:"linear-gradient(135deg, #166534, #22c55e)",letter:"T",textColor:"text-green-100",badgeBg:"bg-green-500/15",badgeText:"text-green-400",badgeBorder:"border-green-500/20"},barren:{gradient:"linear-gradient(135deg, #854d0e, #eab308)",letter:"B",textColor:"text-yellow-100",badgeBg:"bg-yellow-500/15",badgeText:"text-yellow-400",badgeBorder:"border-yellow-500/20"},lava:{gradient:"linear-gradient(135deg, #991b1b, #ef4444)",letter:"L",textColor:"text-red-100",badgeBg:"bg-red-500/15",badgeText:"text-red-400",badgeBorder:"border-red-500/20"},ice:{gradient:"linear-gradient(135deg, #164e63, #06b6d4)",letter:"I",textColor:"text-cyan-100",badgeBg:"bg-cyan-500/15",badgeText:"text-cyan-400",badgeBorder:"border-cyan-500/20"},gas:{gradient:"linear-gradient(135deg, #581c87, #a855f7)",letter:"G",textColor:"text-purple-100",badgeBg:"bg-purple-500/15",badgeText:"text-purple-400",badgeBorder:"border-purple-500/20"},oceanic:{gradient:"linear-gradient(135deg, #1e3a5f, #3b82f6)",letter:"O",textColor:"text-blue-100",badgeBg:"bg-blue-500/15",badgeText:"text-blue-400",badgeBorder:"border-blue-500/20"},plasma:{gradient:"linear-gradient(135deg, #9a3412, #f97316)",letter:"P",textColor:"text-orange-100",badgeBg:"bg-orange-500/15",badgeText:"text-orange-400",badgeBorder:"border-orange-500/20"},storm:{gradient:"linear-gradient(135deg, #374151, #9ca3af)",letter:"S",textColor:"text-gray-100",badgeBg:"bg-gray-500/15",badgeText:"text-gray-400",badgeBorder:"border-gray-500/20"}},_={P0:{label:"Raw",badgeBg:"bg-slate-600/50",badgeText:"text-slate-300",badgeBorder:"border-slate-600/50"},P1:{label:"Processed",badgeBg:"bg-cyan-500/15",badgeText:"text-cyan-400",badgeBorder:"border-cyan-500/20"},P2:{label:"Refined",badgeBg:"bg-indigo-500/15",badgeText:"text-indigo-400",badgeBorder:"border-indigo-500/20"},P3:{label:"Specialized",badgeBg:"bg-amber-500/15",badgeText:"text-amber-400",badgeBorder:"border-amber-500/20"},P4:{label:"Advanced",badgeBg:"bg-rose-500/15",badgeText:"text-rose-400",badgeBorder:"border-rose-500/20"}},S=B(new Set),E=B(new Set),z=B(new Date);let $=null;fe(async()=>{$=setInterval(()=>{z.value=new Date},1e3),await Promise.all([i.fetchColonies(),i.fetchStats(),i.fetchProduction()])}),be(()=>{$&&clearInterval($)});const w=V(()=>i.stats),O=V(()=>i.coloniesByCharacter.length);function C(r){if(!r)return{remaining:-1,formatted:"N/A",status:"expired"};const m=new Date(r).getTime()-z.value.getTime();if(m<=0)return{remaining:0,formatted:"EXPIRE",status:"expired"};const T=Math.floor(m/1e3),H=Math.floor(T/3600),R=Math.floor(T%3600/60),U=T%60,q=`${String(H).padStart(2,"0")}:${String(R).padStart(2,"0")}:${String(U).padStart(2,"0")}`,Q=H<24?"expiring":"active";return{remaining:T,formatted:q,status:Q}}function M(r){switch(r){case"active":return{dot:"bg-emerald-400",text:"text-emerald-400",pulse:""};case"expiring":return{dot:"bg-amber-500",text:"text-amber-400",pulse:"timer-urgent"};case"expired":return{dot:"bg-red-500",text:"text-red-400",pulse:"animate-pulse"}}}function j(r){const t=r.toLowerCase();return h[t]||h.barren}function N(r){return r.pins.filter(t=>t.pinCategory==="extractor"||t.extractorProductTypeId!==null)}function u(r){return r.pins.filter(t=>t.pinCategory==="factory"||t.schematicId!==null&&t.pinCategory!=="extractor")}function x(r){return r.pins.filter(t=>(t.pinCategory==="storage"||t.pinCategory==="launchpad"||t.pinCategory==="command_center")&&t.contents&&t.contents.length>0)}function P(r){return r.status==="expired"?"border-red-500/20":"border-slate-800"}function G(r){const t=new Date(r.cachedAt);return z.value.getTime()-t.getTime()>3600*1e3}async function oe(r){if(S.value.has(r))S.value.delete(r);else{S.value.add(r);const t=i.colonies.find(m=>m.id===r);t&&t.pins.length===0&&await i.fetchColonyDetail(r)}}function le(r){E.value.has(r)?E.value.delete(r):E.value.add(r)}function W(r){if(!r)return"-";const t=Math.floor(r/60);if(t<60)return`${t} min`;const m=Math.floor(t/60),T=t%60;return T>0?`${m}h ${T}min`:`${m}h`}function ie(r){if(!r.extractorQtyPerCycle||!r.extractorCycleTime)return"-";const t=3600/r.extractorCycleTime,m=Math.round(r.extractorQtyPerCycle*t);return`~${y(m)} / heure`}function de(r){return r.split(" ").map(t=>t[0]).join("").substring(0,2).toUpperCase()}function ce(r){return r.items.reduce((t,m)=>t+m.dailyQuantity,0)}function ue(r){const t=i.totalDailyIsk;return t<=0?"-":(r/t*100).toFixed(1)+"%"}function xe(r){const t=_[r];return(t==null?void 0:t.badgeText)||"text-slate-400"}function J(r){return r.length?r.reduce((t,m)=>Math.min(t,m.delta),r[0].delta):0}function X(r){return r>0?{dot:"bg-blue-400",text:"text-blue-400"}:r===0?{dot:"bg-emerald-400",text:"text-emerald-400"}:{dot:"bg-red-400",text:"text-red-400 font-bold"}}function pe(r){return r===0?"0":(r>0?"+":"")+y(r,0)}return(r,t)=>(n(),ve(ke,null,{default:ye(()=>{var m,T,H,R,U,q,Q,Y;return[e("div",Te,[e("div",Be,[t[5]||(t[5]=e("div",{class:"flex items-center gap-4"},[e("div",{class:"relative w-10 h-10"},[e("svg",{class:"w-10 h-10 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})]),e("div",{class:"absolute inset-[-4px] border border-cyan-500/20 rounded-full orbit-ring"})]),e("div",null,[e("h1",{class:"text-2xl font-bold text-white tracking-wide"},"Planetary Interaction"),e("p",{class:"text-sm text-slate-500 -mt-0.5"},"Gestion des colonies PI")])],-1)),e("div",Ie,[e("span",Se,[t[3]||(t[3]=L(" Derniere sync : ",-1)),e("span",je,s(d(i).lastSyncAt?d(D)(d(i).lastSyncAt):"jamais"),1)]),e("button",{onClick:t[0]||(t[0]=a=>d(i).syncColonies()),disabled:d(i).isSyncing,class:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white text-sm font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Met a jour le cache local depuis l'ESI. Les donnees refletent votre derniere interaction en jeu."},[(n(),o("svg",{class:p(["w-4 h-4",d(i).isSyncing?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),L(" "+s(d(i).isSyncing?"Sync...":"Synchroniser"),1)],8,Pe)])]),d(i).error?(n(),o("div",Ee,[t[7]||(t[7]=e("svg",{class:"w-5 h-5 text-red-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",Me,s(d(i).error),1),e("button",{onClick:t[1]||(t[1]=a=>d(i).clearError()),class:"ml-auto text-red-400 hover:text-red-300"},[...t[6]||(t[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):g("",!0),d(i).isLoading&&!d(i).colonies.length?(n(),o("div",Ne,[...t[8]||(t[8]=[e("div",{class:"flex flex-col items-center gap-4"},[e("svg",{class:"animate-spin h-10 w-10 text-cyan-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-slate-400 text-sm"},"Chargement des colonies...")],-1)])])):!d(i).isLoading&&d(i).colonies.length===0&&!d(i).error?(n(),o("div",De,[...t[9]||(t[9]=[e("svg",{class:"w-16 h-16 text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9"})],-1),e("h3",{class:"text-lg font-semibold text-slate-300 mb-2"},"Aucune colonie PI",-1),e("p",{class:"text-sm text-slate-500 max-w-md"},` Aucune colonie detectee. Cliquez sur "Synchroniser" pour charger vos donnees PI depuis l'ESI, ou verifiez que vos personnages ont le scope Planetary Interaction. `,-1)])])):d(i).colonies.length>0?(n(),o(b,{key:3},[e("div",Ae,[e("div",Le,[t[10]||(t[10]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-slate-400 text-sm font-medium uppercase tracking-wider"},"Colonies"),e("svg",{class:"w-5 h-5 text-cyan-400/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9"})])],-1)),e("div",Ve,s(((m=w.value)==null?void 0:m.totalColonies)??d(i).colonies.length),1),e("div",ze,"sur "+s(O.value)+" personnage"+s(O.value>1?"s":""),1)]),e("div",$e,[t[11]||(t[11]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-emerald-400 text-sm font-medium uppercase tracking-wider"},"Extracteurs actifs"),e("svg",{class:"w-5 h-5 text-emerald-400/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",He,[e("span",Fe,s(((T=w.value)==null?void 0:T.activeExtractors)??0),1),(((H=w.value)==null?void 0:H.expiredExtractors)??0)>0?(n(),o("span",Oe,s((R=w.value)==null?void 0:R.expiredExtractors)+" expire"+s((((U=w.value)==null?void 0:U.expiredExtractors)??0)>1?"s":""),1)):g("",!0)]),e("div",Re,s(((q=w.value)==null?void 0:q.totalExtractors)??0)+" extracteurs au total",1)]),e("div",Ue,[t[12]||(t[12]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-amber-400 text-sm font-medium uppercase tracking-wider"},"Expirent bientot"),e("svg",{class:"w-5 h-5 text-amber-400/60 timer-urgent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",qe,s(((Q=w.value)==null?void 0:Q.expiringExtractors)??0),1),t[13]||(t[13]=e("div",{class:"mt-1 text-xs text-slate-500"},"dans les prochaines 24h",-1))]),e("div",Qe,[t[14]||(t[14]=e("div",{class:"flex items-center justify-between"},[e("span",{class:"text-cyan-400 text-sm font-medium uppercase tracking-wider"},"Production theorique/jour"),e("svg",{class:"w-5 h-5 text-cyan-400/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),e("div",Ge,s(d(I)(((Y=w.value)==null?void 0:Y.estimatedDailyIsk)??d(i).totalDailyIsk)),1),t[15]||(t[15]=e("div",{class:"mt-1 text-xs text-slate-500"},"ISK / jour (base sur le setup actuel)",-1))])]),d(i).expiredColonies.length>0||d(i).expiringColonies.length>0?(n(),o("div",Je,[d(i).expiredColonies.length>0?(n(),o("div",Ke,[t[16]||(t[16]=e("div",{class:"w-2 h-2 rounded-full bg-red-500 animate-pulse"},null,-1)),e("span",We,s(d(i).expiredColonies.length)+" extracteur"+s(d(i).expiredColonies.length>1?"s":"")+" expire"+s(d(i).expiredColonies.length>1?"s":""),1),t[17]||(t[17]=e("span",{class:"text-red-300/60"},"-",-1)),e("span",Xe,s(d(i).expiredColonies.map(a=>`${a.solarSystemName||"Unknown"} (${a.planetType})`).join(", ")),1)])):g("",!0),d(i).expiringColonies.length>0?(n(),o("div",Ye,[t[18]||(t[18]=e("div",{class:"w-2 h-2 rounded-full bg-amber-500 timer-urgent"},null,-1)),e("span",Ze,s(d(i).expiringColonies.length)+" expirent dans moins de 24h",1)])):g("",!0)])):g("",!0),d(i).production.length>0?(n(),o("div",et,[t[29]||(t[29]=e("h3",{class:"text-sm font-semibold text-slate-300 uppercase tracking-wider mb-4 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),L(" Production globale par tier ")],-1)),e("div",tt,[e("table",st,[t[28]||(t[28]=e("thead",null,[e("tr",{class:"text-xs text-slate-500 uppercase tracking-wider"},[e("th",{class:"text-left pb-3 font-medium w-6"}),e("th",{class:"text-left pb-3 font-medium"},"Tier"),e("th",{class:"text-right pb-3 font-medium"},"Produits"),e("th",{class:"text-right pb-3 font-medium"},"Volume / jour"),e("th",{class:"text-right pb-3 font-medium"},"ISK / jour"),e("th",{class:"text-right pb-3 font-medium"},"% total")])],-1)),e("tbody",rt,[(n(!0),o(b,null,k(d(i).production,a=>{var l,c,A,Z;return n(),o(b,{key:a.tier},[e("tr",{class:p(["cursor-pointer hover:bg-slate-800/30 transition-colors",{"opacity-40":a.items.length===0}]),onClick:f=>le(a.tier)},[e("td",nt,[(n(),o("svg",{class:p(["w-4 h-4 transition-transform duration-200",a.items.length===0?"text-slate-600":"text-slate-500"]),style:ne(E.value.has(a.tier)?"transform: rotate(90deg)":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[19]||(t[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],6))]),e("td",ot,[e("div",lt,[e("span",{class:p(["text-[10px] px-1.5 py-0.5 rounded border",(l=_[a.tier])==null?void 0:l.badgeBg,(c=_[a.tier])==null?void 0:c.badgeText,(A=_[a.tier])==null?void 0:A.badgeBorder])},s(a.tier),3),e("span",it,s(((Z=_[a.tier])==null?void 0:Z.label)||a.tier),1)])]),e("td",{class:p(["py-2.5 text-right",a.items.length>0?"text-white font-medium":"text-slate-500"])},s(a.items.length>0?a.items.length:"0"),3),e("td",{class:p(["py-2.5 text-right",a.items.length>0?"text-slate-300 font-mono-tech":"text-slate-500"])},s(a.items.length>0?d(y)(ce(a),0):"-"),3),e("td",{class:p(["py-2.5 text-right",a.dailyIskValue>0?xe(a.tier)+" font-medium":"text-slate-500"])},s(a.dailyIskValue>0?d(I)(a.dailyIskValue):"-"),3),e("td",{class:p(["py-2.5 text-right",a.dailyIskValue>0?"text-slate-300":"text-slate-500"])},s(a.dailyIskValue>0?ue(a.dailyIskValue):"-"),3)],10,at),E.value.has(a.tier)&&a.items.length>0?(n(),o("tr",dt,[t[23]||(t[23]=e("td",null,null,-1)),e("td",ct,[e("div",ut,[e("div",xt,[t[20]||(t[20]=e("span",{class:"flex-1"},"Produit",-1)),a.tier!=="P0"?(n(),o("span",pt,"Inputs")):g("",!0),t[21]||(t[21]=e("span",{class:"w-14 text-right"},"Sortie",-1)),t[22]||(t[22]=e("span",{class:"w-20 text-right"},"ISK/j",-1)),a.tier!=="P0"?(n(),o("span",gt,"Supply")):g("",!0)]),e("div",mt,[(n(!0),o(b,null,k(a.items,f=>{var ee,te,se,re,ae;return n(),o("div",{key:f.typeId,class:"flex items-center gap-4 text-xs px-1"},[e("div",ht,[e("span",{class:p(["w-1.5 h-1.5 rounded-full",((te=(ee=_[a.tier])==null?void 0:ee.badgeText)==null?void 0:te.replace("text-","bg-"))||"bg-cyan-400"])},null,2),e("span",ft,s(f.typeName),1),(se=f.inputs)!=null&&se.length?(n(),o("span",bt," â† "+s(f.inputs.map(K=>K.typeName).join(" + ")),1)):g("",!0)]),a.tier!=="P0"?(n(),o("span",vt,s((re=f.inputs)!=null&&re.length?d(y)(f.inputs.reduce((K,ge)=>K+ge.dailyConsumed,0),0):"-"),1)):g("",!0),e("span",yt,s(d(y)(f.dailyQuantity,0))+"/j",1),e("span",{class:p(["w-20 text-right font-mono-tech",f.dailyIskValue>0?"text-cyan-400":"text-slate-500"])},s(f.dailyIskValue>0?d(I)(f.dailyIskValue):"-"),3),a.tier!=="P0"?(n(),o("div",wt,[(ae=f.inputs)!=null&&ae.length?(n(),o(b,{key:0},[e("span",{class:p(["w-1.5 h-1.5 rounded-full",X(J(f.inputs)).dot])},null,2),e("span",{class:p(["font-mono-tech",X(J(f.inputs)).text])},s(pe(J(f.inputs))),3)],64)):(n(),o("span",kt,"-"))])):g("",!0)])}),128))])])])])):g("",!0)],64)}),128))]),e("tfoot",null,[e("tr",_t,[t[24]||(t[24]=e("td",null,null,-1)),t[25]||(t[25]=e("td",{class:"py-3"},[e("span",{class:"text-cyan-400 font-semibold"},"Total")],-1)),e("td",Ct,s(d(i).production.reduce((a,l)=>a+l.items.length,0)),1),t[26]||(t[26]=e("td",{class:"py-3 text-right text-slate-500"},"-",-1)),e("td",Tt,s(d(I)(d(i).totalDailyIsk)),1),t[27]||(t[27]=e("td",{class:"py-3 text-right text-cyan-400 font-bold"},"100%",-1))])])])]),t[30]||(t[30]=e("div",{class:"mt-3 pt-3 border-t border-slate-800"},[e("p",{class:"text-[11px] text-slate-500 italic"}," Production theorique : qty_per_cycle x (3600 / cycle_time) x 24, chainee via schematics SDE, valorisee aux prix Jita ")],-1))])):g("",!0),(n(!0),o(b,null,k(d(i).coloniesByCharacter,a=>(n(),o("div",{key:a.characterId,class:"space-y-2"},[e("div",Bt,[e("div",It,[e("img",{src:`https://images.evetech.net/characters/${a.characterId}/portrait?size=64`,alt:a.characterName,class:"w-8 h-8 rounded-full",onError:t[2]||(t[2]=l=>l.target.style.display="none")},null,40,St),e("span",jt,s(de(a.characterName)),1)]),e("h2",Pt,s(a.characterName),1),e("span",Et,s(a.colonies.length)+" colonie"+s(a.colonies.length>1?"s":""),1),t[31]||(t[31]=e("div",{class:"flex-1 h-px bg-slate-800"},null,-1))]),e("div",Mt,[(n(!0),o(b,null,k(a.colonies,l=>(n(),o("div",{key:l.id,class:p(["colony-card bg-slate-900 rounded-xl overflow-hidden cursor-pointer",[P(l),S.value.has(l.id)?"expanded":""]]),style:{"border-width":"1px"}},[e("div",{class:"px-5 py-4",onClick:c=>oe(l.id)},[e("div",Dt,[e("div",At,[e("div",{class:"w-9 h-9 rounded-full flex items-center justify-center text-xs font-bold",style:ne({background:j(l.planetType).gradient})},[e("span",{class:p(j(l.planetType).textColor)},s(j(l.planetType).letter),3)],4),e("div",null,[e("div",Lt,[e("span",Vt,s(l.solarSystemName||"Unknown")+" "+s(l.planetId),1),e("span",{class:p(["text-[10px] px-1.5 py-0.5 rounded-full font-medium uppercase tracking-wider border",j(l.planetType).badgeBg,j(l.planetType).badgeText,j(l.planetType).badgeBorder])},s(l.planetType),3)]),e("div",zt,[e("span",null,s(l.solarSystemName||"Unknown"),1)])])]),e("div",$t,[t[32]||(t[32]=e("span",{class:"text-xs text-slate-500 mr-1"},"CC Lv",-1)),e("div",Ht,[(n(),o(b,null,k(5,c=>e("div",{key:c,class:p(["w-3.5 h-1.5 rounded-sm",c<=l.upgradeLevel?"bg-cyan-400":"bg-slate-700"])},null,2)),64))])]),e("div",Ft,[e("span",Ot,s(l.numPins),1),t[33]||(t[33]=e("span",{class:"text-slate-500 text-xs ml-1"},"pins",-1))]),e("div",Rt,[(n(!0),o(b,null,k(N(l),c=>(n(),o("div",{key:c.pinId,class:"flex items-center gap-1.5"},[e("div",{class:p(["w-2 h-2 rounded-full",M(C(c.expiryTime).status).dot,M(C(c.expiryTime).status).pulse])},null,2),e("span",{class:p(["font-mono-tech text-sm",M(C(c.expiryTime).status).text,C(c.expiryTime).status==="expired"?"font-bold":""])},s(C(c.expiryTime).formatted),3)]))),128)),N(l).length===0?(n(),o("span",Ut," Aucun extracteur ")):g("",!0)]),e("div",qt,[e("div",Qt,"MAJ "+s(d(D)(l.cachedAt)),1),G(l)?(n(),o("div",Gt,[...t[34]||(t[34]=[e("span",{class:"stale-badge text-[10px] text-slate-900 px-1.5 py-0.5 rounded-full font-medium"},"STALE",-1)])])):g("",!0)]),(n(),o("svg",{class:p(["w-5 h-5 text-slate-500 transition-transform duration-200",S.value.has(l.id)?"rotate-180":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[35]||(t[35]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])],8,Nt),S.value.has(l.id)?(n(),o("div",Jt,[e("div",Kt,[N(l).length>0?(n(),o("div",Wt,[t[43]||(t[43]=e("h4",{class:"text-sm font-semibold text-slate-300 uppercase tracking-wider mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),L(" Extracteurs ")],-1)),e("div",Xt,[(n(!0),o(b,null,k(N(l),c=>(n(),o("div",{key:c.pinId,class:"bg-slate-800/50 rounded-lg p-3 border border-slate-700"},[e("div",Yt,[e("div",Zt,[t[37]||(t[37]=e("div",{class:"w-7 h-7 rounded bg-slate-700 border border-slate-600 flex items-center justify-center"},[e("span",{class:"text-[9px] text-slate-400"},"P0")],-1)),e("div",null,[e("span",es,s(c.extractorProductName||c.typeName||"Unknown"),1),t[36]||(t[36]=e("div",{class:"text-[10px] text-slate-500"},"Extractor Control Unit",-1))])]),e("div",ts,[e("div",{class:p(["font-mono-tech text-lg font-bold",M(C(c.expiryTime).status).text])},s(C(c.expiryTime).formatted),3),t[38]||(t[38]=e("div",{class:"text-[10px] text-slate-500"},"restant",-1))])]),e("div",ss,[e("div",rs,[t[39]||(t[39]=e("span",{class:"text-slate-500 block"},"Cycle",-1)),e("span",as,s(W(c.extractorCycleTime)),1)]),e("div",ns,[t[40]||(t[40]=e("span",{class:"text-slate-500 block"},"Qty/cycle",-1)),e("span",os,s(c.extractorQtyPerCycle?d(y)(c.extractorQtyPerCycle,0):"-"),1)]),e("div",ls,[t[41]||(t[41]=e("span",{class:"text-slate-500 block"},"Tetes",-1)),e("span",is,s(c.extractorNumHeads??"-"),1)])]),e("div",ds,[t[42]||(t[42]=e("span",{class:"text-slate-500"},"Output estime",-1)),e("span",cs,s(ie(c)),1)])]))),128))])])):g("",!0),u(l).length>0?(n(),o("div",us,[e("h4",xs,[t[44]||(t[44]=e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})],-1)),t[45]||(t[45]=L(" Factories ",-1)),e("span",ps,"("+s(u(l).length)+")",1)]),e("div",gs,[e("table",ms,[t[46]||(t[46]=e("thead",null,[e("tr",{class:"text-xs text-slate-500 uppercase tracking-wider"},[e("th",{class:"text-left pb-2 font-medium"},"Schematic"),e("th",{class:"text-left pb-2 font-medium"},"Output"),e("th",{class:"text-right pb-2 font-medium"},"Cycle")])],-1)),e("tbody",hs,[(n(!0),o(b,null,k(u(l),c=>(n(),o("tr",{key:c.pinId},[e("td",fs,s(c.schematicName||c.typeName||"Unknown"),1),e("td",bs,[e("span",vs,s(c.schematicName||"-"),1)]),e("td",ys,s(c.extractorCycleTime?W(c.extractorCycleTime):"30 min"),1)]))),128))])])])])):g("",!0),x(l).length>0?(n(),o("div",ws,[t[48]||(t[48]=e("h4",{class:"text-sm font-semibold text-slate-300 uppercase tracking-wider mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),L(" Stockage ")],-1)),(n(!0),o(b,null,k(x(l),c=>(n(),o("div",{key:c.pinId,class:"bg-slate-800/50 rounded-lg border border-slate-700 divide-y divide-slate-800 mb-2"},[e("div",ks,[e("div",_s,[e("span",Cs,s(c.typeName||"Launchpad"),1)])]),e("div",Ts,[t[47]||(t[47]=e("svg",{class:"w-3.5 h-3.5 text-amber-400/70 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Bs," Snapshot du "+s(new Date(l.cachedAt).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}))+" a "+s(new Date(l.cachedAt).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}))+" -- Donnees mises a jour lors de la derniere interaction en jeu ",1)]),e("div",Is,[(n(!0),o(b,null,k(c.contents,A=>(n(),o("div",{key:A.typeId,class:"flex justify-between text-slate-400"},[e("span",null,s(A.typeName)+" x "+s(d(y)(A.amount,0)),1)]))),128))])]))),128))])):g("",!0),N(l).length===0&&u(l).length===0&&x(l).length===0?(n(),o("div",Ss,[...t[49]||(t[49]=[e("p",{class:"text-sm text-slate-500 italic"},"Aucun detail disponible pour cette colonie. Synchronisez pour charger les donnees des pins.",-1)])])):g("",!0)])])):g("",!0)],2))),128))])]))),128)),e("div",js,[e("div",Ps,[e("div",Es,[t[50]||(t[50]=e("span",{class:"text-slate-500 uppercase tracking-wider font-medium"},"Tiers PI",-1)),(n(),o(b,null,k(_,(a,l)=>e("div",{key:l,class:"flex items-center gap-1.5"},[e("span",{class:p(["px-1.5 py-0.5 rounded border",a.badgeBg,a.badgeText,a.badgeBorder])},s(l),3),e("span",Ms,s(a.label),1)])),64))]),t[51]||(t[51]=e("div",{class:"flex items-center gap-4 text-xs text-slate-500"},[e("div",{class:"flex items-center gap-1.5"},[e("div",{class:"w-2 h-2 rounded-full bg-emerald-400"}),e("span",null,"> 24h")]),e("div",{class:"flex items-center gap-1.5"},[e("div",{class:"w-2 h-2 rounded-full bg-amber-500"}),e("span",null,"< 24h")]),e("div",{class:"flex items-center gap-1.5"},[e("div",{class:"w-2 h-2 rounded-full bg-red-500"}),e("span",null,"Expire")])],-1))])])],64)):g("",!0)])]}),_:1}))}}),zs=_e(Ns,[["__scopeId","data-v-2420c9ce"]]);export{zs as default};
