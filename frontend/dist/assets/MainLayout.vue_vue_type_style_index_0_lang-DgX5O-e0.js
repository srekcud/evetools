import{d as Y,u as Z,Q as ee,o as A,H as te,c as l,b as e,q as se,w as oe,s as ae,a as le,F as H,m as D,t as n,l as ne,i as P,T as F,e as v,n as b,P as re,k as I,r as c,p as y,h as o,g as ie}from"./index-BmJN7W-L.js";const de={class:"min-h-screen bg-slate-950 text-slate-100 font-sans"},ce={key:0,class:"fixed top-0 left-0 right-0 z-50 bg-amber-600 text-white px-4 py-2 text-center text-sm font-medium shadow-lg"},ue={class:"flex items-center justify-center gap-2"},ve={class:"w-64 bg-slate-900/80 backdrop-blur-xl border-r border-cyan-500/20 flex flex-col"},pe={class:"flex-1 p-4 space-y-1"},he=["onClick"],me={class:"w-5 h-5 relative",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be=["d"],xe={class:"font-medium relative"},ge={key:0,class:"ml-auto w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse relative"},fe={class:"p-4 border-t border-cyan-500/20"},ye={class:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50"},we={class:"relative"},ke=["src","alt"],_e={key:1,class:"w-12 h-12 rounded-lg ring-2 ring-cyan-500/50 bg-slate-700 animate-pulse"},Ce={class:"flex-1 min-w-0"},Me={class:"font-semibold text-slate-100 truncate"},Se={class:"text-xs text-cyan-400 truncate"},Le=["disabled"],Ie={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={key:1,class:"w-4 h-4 group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Ee={class:"relative bg-slate-900 rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/10 w-full max-w-md mx-4"},Ne={class:"flex items-center justify-between px-6 py-4 border-b border-slate-700/50"},Be={class:"p-6"},Ve={class:"space-y-2"},$e=["checked","onChange"],Re={class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Te=["d"],Oe={class:"text-slate-200"},Ae={class:"px-6 py-4 border-t border-slate-700/50 flex justify-end"},He={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},De={class:"relative bg-slate-900 rounded-2xl border border-cyan-500/30 shadow-2xl shadow-cyan-500/10 w-full max-w-2xl mx-4 max-h-[80vh] flex flex-col"},Pe={class:"flex items-center justify-between px-6 py-4 border-b border-slate-700/50"},Fe={class:"flex-1 overflow-y-auto p-6"},qe={key:0,class:"flex items-center justify-center py-8"},Ue={key:1,class:"text-sm text-slate-300 whitespace-pre-wrap font-mono leading-relaxed"},Je={class:"px-6 py-4 border-t border-slate-700/50 flex justify-end"},Ke={class:"flex-1 overflow-auto"},Qe={class:"sticky top-0 z-10 bg-slate-900/60 backdrop-blur-xl border-b border-cyan-500/10 px-8 py-4"},We={class:"flex items-center justify-between"},Ge={class:"text-2xl font-bold text-slate-100"},Xe={class:"flex items-center gap-4"},Ye=["title"],Ze={key:0,class:"text-slate-500"},et={key:0,class:"flex items-center gap-2 px-4 py-2 bg-amber-500/10 rounded-lg border border-amber-500/30"},tt=["src"],st={class:"text-amber-400 text-sm font-medium"},ot={key:1,class:"flex items-center gap-2 px-4 py-2 bg-cyan-500/10 rounded-lg border border-cyan-500/30"},at=["src"],lt={class:"text-cyan-400 text-sm font-medium"},nt={class:"p-8"},rt={class:"max-w-7xl mx-auto"},it="0.1.2",ut=Y({__name:"MainLayout",setup(dt){const w=ie(),k=Z(),_=ee(),p=c(!1),x=c(""),C=c(!1);async function q(){if(p.value=!0,!x.value){C.value=!0;try{const s=await fetch("/RELEASE_NOTES.txt");x.value=await s.text()}catch{x.value="Impossible de charger les notes de version."}finally{C.value=!1}}}const g=c(null),i=c(!1),d=c(!1);let M=null;async function j(){try{const s=await fetch("https://esi.evetech.net/latest/status/?datasource=tranquility");s.ok?(g.value=await s.json(),i.value=!1,d.value=!1):s.status===420?(i.value=!1,d.value=!0):(i.value=!0,d.value=!1)}catch{i.value=!0,d.value=!1}}A(()=>{j(),M=setInterval(j,3e5)}),te(()=>{M&&clearInterval(M)});const z=y(()=>k.user),r=y(()=>{var s,t,m;return((s=z.value)==null?void 0:s.mainCharacter)||((m=(t=z.value)==null?void 0:t.characters)==null?void 0:m[0])}),E=["assets","contracts"],S=[{id:"dashboard",label:"Tableau de bord",route:"/dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{id:"characters",label:"Personnages",route:"/characters",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},{id:"pve",label:"PVE",route:"/pve",icon:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},{id:"industry",label:"Industrie",route:"/industry",icon:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"},{id:"shopping-list",label:"Liste de courses",route:"/shopping-list",icon:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},{id:"assets",label:"Inventaire",route:"/assets",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"contracts",label:"Contrats",route:"/contracts",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}],h=c(!1),u=c([]);A(()=>{const s=localStorage.getItem("evetools_hidden_modules");if(s)try{u.value=JSON.parse(s)}catch{u.value=[...E]}else u.value=[...E]});function U(){localStorage.setItem("evetools_hidden_modules",JSON.stringify(u.value))}function J(s){const t=u.value.indexOf(s);t===-1?u.value.push(s):u.value.splice(t,1),U()}function N(s){return!u.value.includes(s)}const K=y(()=>S.filter(s=>N(s.id)));function Q(s){w.push(s.route)}function L(s){return w.currentRoute.value.path===s.route}const f=c(!1),W=async()=>{f.value=!0;try{await fetch("/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${k.token}`}})}catch(s){console.error("Logout error:",s)}finally{k.logout(),w.push("/login")}},G=y(()=>{const s=S.find(t=>L(t));return(s==null?void 0:s.label)||"Dashboard"});return(s,t)=>{var m,B,V,$,R,T,O;return o(),l("div",de,[t[22]||(t[22]=e("div",{class:"fixed inset-0 overflow-hidden pointer-events-none"},[e("div",{class:"absolute -top-1/2 -left-1/2 w-full h-full bg-gradient-radial from-cyan-900/20 via-transparent to-transparent animate-pulse-slow"}),e("div",{class:"absolute -bottom-1/2 -right-1/2 w-full h-full bg-gradient-radial from-indigo-900/15 via-transparent to-transparent animate-pulse-slower"}),e("div",{class:"absolute inset-0 bg-[linear-gradient(rgba(6,182,212,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(6,182,212,0.03)_1px,transparent_1px)] bg-[size:50px_50px]"})],-1)),se(ae,{name:"slide-down"},{default:oe(()=>[I(_).isRateLimited?(o(),l("div",ce,[e("div",ue,[t[7]||(t[7]=e("svg",{class:"w-5 h-5 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",null,"Rate limit ESI atteint - Actions ESI bloquées pendant "+n(I(_).remainingSeconds)+"s",1)])])):v("",!0)]),_:1}),e("div",{class:b(["relative flex h-screen",{"pt-10":I(_).isRateLimited}])},[e("aside",ve,[t[13]||(t[13]=le('<div class="p-6 border-b border-cyan-500/20"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/30"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><div><h1 class="text-lg font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400">EVE Tools</h1><p class="text-xs text-slate-500 tracking-widest uppercase">Utilities</p></div></div></div>',1)),e("nav",pe,[(o(!0),l(H,null,D(K.value,a=>(o(),l("button",{key:a.id,onClick:X=>Q(a),class:b(["w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-300 group relative overflow-hidden border",L(a)?"bg-gradient-to-r from-cyan-500/20 to-blue-500/10 text-cyan-400 shadow-lg shadow-cyan-500/10 border-cyan-500/30":"text-slate-400 border-transparent hover:bg-slate-800/50 hover:text-slate-200 hover:border-cyan-500/30 hover:shadow-lg hover:shadow-cyan-500/5 hover:-translate-y-0.5"])},[t[8]||(t[8]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-cyan-500/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-in-out"},null,-1)),(o(),l("svg",me,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:a.icon},null,8,be)])),e("span",xe,n(a.label),1),L(a)?(o(),l("div",ge)):v("",!0)],10,he))),128))]),e("div",fe,[e("div",ye,[e("div",{onClick:t[0]||(t[0]=a=>h.value=!0),class:"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity",title:"Ouvrir les parametres"},[e("div",we,[r.value?(o(),l("img",{key:0,src:`https://images.evetech.net/characters/${r.value.eveCharacterId}/portrait?size=64`,alt:r.value.name,class:"w-12 h-12 rounded-lg ring-2 ring-cyan-500/50"},null,8,ke)):(o(),l("div",_e)),t[9]||(t[9]=e("div",{class:"absolute -bottom-1 -right-1 w-4 h-4 bg-emerald-500 rounded-full border-2 border-slate-800"},null,-1))]),e("div",Ce,[e("p",Me,n(((m=r.value)==null?void 0:m.name)||"Chargement..."),1),e("p",Se,n(((B=r.value)==null?void 0:B.corporationName)||""),1)]),t[10]||(t[10]=e("svg",{class:"w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1))]),e("button",{onClick:W,disabled:f.value,class:"mt-4 w-full py-2 px-3 bg-slate-700/50 hover:bg-red-500/20 rounded-lg text-sm text-slate-400 hover:text-red-400 transition-colors flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(o(),l("svg",Ie,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(o(),l("svg",je,[...t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"},null,-1)])])),ne(" "+n(f.value?"Déconnexion...":"Déconnexion"),1)],8,Le)])]),e("button",{onClick:q,class:"mt-3 pb-4 w-full text-center text-xs text-slate-600 hover:text-cyan-400 transition-colors",title:"Voir les notes de version"}," v"+n(it))]),(o(),P(F,{to:"body"},[h.value?(o(),l("div",ze,[e("div",{class:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm",onClick:t[1]||(t[1]=a=>h.value=!1)}),e("div",Ee,[e("div",Ne,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-slate-100"},"Parametres",-1)),e("button",{onClick:t[2]||(t[2]=a=>h.value=!1),class:"p-1 hover:bg-slate-800 rounded-lg transition-colors"},[...t[14]||(t[14]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Be,[t[16]||(t[16]=e("h4",{class:"text-sm font-medium text-slate-400 uppercase tracking-wider mb-4"},"Modules visibles",-1)),e("div",Ve,[(o(),l(H,null,D(S,a=>e("label",{key:a.id,class:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-800/50 cursor-pointer transition-colors"},[e("input",{type:"checkbox",checked:N(a.id),onChange:X=>J(a.id),class:"w-4 h-4 rounded border-slate-600 bg-slate-800 text-cyan-500 focus:ring-cyan-500 focus:ring-offset-slate-900"},null,40,$e),(o(),l("svg",Re,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:a.icon},null,8,Te)])),e("span",Oe,n(a.label),1)])),64))]),t[17]||(t[17]=e("p",{class:"mt-4 text-xs text-slate-500"}," Les modules masques n'apparaitront plus dans le menu de navigation. ",-1))]),e("div",Ae,[e("button",{onClick:t[3]||(t[3]=a=>h.value=!1),class:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white text-sm font-medium transition-colors"}," Fermer ")])])])):v("",!0)])),(o(),P(F,{to:"body"},[p.value?(o(),l("div",He,[e("div",{class:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm",onClick:t[4]||(t[4]=a=>p.value=!1)}),e("div",De,[e("div",Pe,[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-slate-100"},"Notes de version",-1)),e("button",{onClick:t[5]||(t[5]=a=>p.value=!1),class:"p-1 hover:bg-slate-800 rounded-lg transition-colors"},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Fe,[C.value?(o(),l("div",qe,[...t[20]||(t[20]=[e("svg",{class:"animate-spin h-8 w-8 text-cyan-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(o(),l("pre",Ue,n(x.value),1))]),e("div",Je,[e("button",{onClick:t[6]||(t[6]=a=>p.value=!1),class:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white text-sm font-medium transition-colors"}," Fermer ")])])])):v("",!0)])),e("main",Ke,[e("header",Qe,[e("div",We,[e("div",null,[e("h2",Ge,n(G.value),1),t[21]||(t[21]=e("p",{class:"text-sm text-slate-500 mt-1"},"Bon retour, capsulier",-1))]),e("div",Xe,[e("div",{class:b(["flex items-center gap-2 px-3 py-1.5 rounded-lg border text-xs",i.value?"bg-red-500/10 border-red-500/30":d.value?"bg-amber-500/10 border-amber-500/30":"bg-emerald-500/10 border-emerald-500/30"]),title:i.value?"ESI indisponible":d.value?"ESI rate limité":`ESI OK - ${(($=(V=g.value)==null?void 0:V.players)==null?void 0:$.toLocaleString())||0} joueurs en ligne`},[e("div",{class:b(["w-2 h-2 rounded-full",i.value?"bg-red-500":d.value?"bg-amber-500 animate-pulse":"bg-emerald-500 animate-pulse"])},null,2),e("span",{class:b(i.value?"text-red-400":d.value?"text-amber-400":"text-emerald-400")}," ESI "+n(i.value?"DOWN":d.value?"RATE LIMITED":"OK"),3),(R=g.value)!=null&&R.players&&!i.value&&!d.value?(o(),l("span",Ze,n((g.value.players/1e3).toFixed(1))+"k ",1)):v("",!0)],10,Ye),(T=r.value)!=null&&T.allianceId?(o(),l("div",et,[e("img",{src:`https://images.evetech.net/alliances/${r.value.allianceId}/logo?size=32`,class:"w-6 h-6"},null,8,tt),e("span",st,n(r.value.allianceName),1)])):v("",!0),(O=r.value)!=null&&O.corporationId?(o(),l("div",ot,[e("img",{src:`https://images.evetech.net/corporations/${r.value.corporationId}/logo?size=32`,class:"w-6 h-6"},null,8,at),e("span",lt,n(r.value.corporationName),1)])):v("",!0)])])]),e("div",nt,[e("div",rt,[re(s.$slots,"default")])])])],2)])}}});export{ut as _};
